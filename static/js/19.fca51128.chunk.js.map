{"version":3,"sources":["components/MapSwitcher.js","../node_modules/react-use/esm/useIsomorphicLayoutEffect.js","../node_modules/react-use/esm/useMeasure.js","../node_modules/classnames/index.js"],"names":["React","memo","mapStatistic","setMapStatistic","useMeasure","mapSwitcher","width","useState","clicked","setClicked","count","setCount","useSpring","opacity","background","COLORS","transform","PRIMARY_STATISTICS","indexOf","config","gentle","spring","set","useEffect","ReactDOM","unstable_batchedUpdates","delay","onStart","bind","onRest","handleClick","useCallback","statistic","prevCount","className","ref","div","style","map","index","key","classnames","onClick","prevProps","currProps","useIsomorphicLayoutEffect","window","useLayoutEffect","defaultState","x","y","height","top","left","bottom","right","isClient","ResizeObserver","_a","element","_b","rect","setRect","observer","useMemo","entries","contentRect","top_1","observe","disconnect","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","call","join","module","exports","default"],"mappings":"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","file":"static/js/19.fca51128.chunk.js","sourcesContent":["import {PRIMARY_STATISTICS, COLORS} from '../constants';\n\nimport classnames from 'classnames';\nimport React, {useState, useCallback, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport {useSpring, animated, config} from 'react-spring';\nimport {useMeasure} from 'react-use';\n\nconst MapSwitcher = ({mapStatistic, setMapStatistic}) => {\n  const [mapSwitcher, {width}] = useMeasure();\n  const [clicked, setClicked] = useState(false);\n  const [count, setCount] = useState(0);\n  const [spring, set] = useSpring(() => ({\n    opacity: 0,\n    background: `${COLORS[mapStatistic]}20`,\n    transform: `translateX(${\n      width * PRIMARY_STATISTICS.indexOf(mapStatistic) * 0.25\n    }px)`,\n    config: config.gentle,\n  }));\n\n  useEffect(() => {\n    if (width > 0) {\n      ReactDOM.unstable_batchedUpdates(() => {\n        set({\n          transform: `translateX(${\n            width * PRIMARY_STATISTICS.indexOf(mapStatistic) * 0.25\n          }px)`,\n          opacity: 1,\n          background: `${COLORS[mapStatistic]}20`,\n          delay: count === 0 ? 1500 : 0,\n          onStart: setClicked.bind(this, true),\n          onRest: setClicked.bind(this, false),\n        });\n      });\n    }\n  }, [count, mapStatistic, set, width]);\n\n  const handleClick = useCallback(\n    (statistic) => {\n      setCount((prevCount) => prevCount + 1);\n      setMapStatistic(statistic);\n    },\n    [setMapStatistic]\n  );\n\n  return (\n    <div className=\"MapSwitcher\" ref={mapSwitcher}>\n      <animated.div className=\"highlight\" style={spring}></animated.div>\n\n      {PRIMARY_STATISTICS.map((statistic, index) => (\n        <div\n          key={index}\n          className={classnames('clickable', {[`is-${statistic}`]: !clicked})}\n          onClick={handleClick.bind(this, statistic)}\n        ></div>\n      ))}\n    </div>\n  );\n};\n\nconst isEqual = (prevProps, currProps) => {\n  if (prevProps.mapStatistic !== currProps.mapStatistic) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(MapSwitcher, isEqual);\n","import { useEffect, useLayoutEffect } from 'react';\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n","import { useState, useMemo } from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport { isClient } from './util';\nvar defaultState = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n};\nvar useMeasure = function () {\n    var _a = useState(null), element = _a[0], ref = _a[1];\n    var _b = useState(defaultState), rect = _b[0], setRect = _b[1];\n    var observer = useMemo(function () {\n        return new window.ResizeObserver(function (entries) {\n            if (entries[0]) {\n                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });\n            }\n        });\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        if (!element)\n            return;\n        observer.observe(element);\n        return function () {\n            observer.disconnect();\n        };\n    }, [element]);\n    return [ref, rect];\n};\nvar useMeasureMock = function () { return [function () { }, defaultState]; };\nexport default (isClient && !!window.ResizeObserver) ? useMeasure : useMeasureMock;\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}