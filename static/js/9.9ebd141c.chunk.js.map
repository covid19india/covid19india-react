{"version":3,"sources":["components/downloadblock.js","components/patientsview.js","components/patients.js","components/patientdb.js"],"names":["React","memo","props","className","style","animationDelay","target","href","PatientsView","logs","summary","setModal","setPatient","expand","applyClass","Object","keys","slice","map","day","index","Fragment","key","format","Date","length","patient","indexTwo","onClick","patientnumber","Patients","useState","patients","setPatients","setLogs","modal","useLockBodyScroll","window","onclick","event","document","getElementById","useKeyPressEvent","useEffect","parseByDate","useCallback","log","i","parse","dateannounced","list","push","colorMode","gender","typeoftransmission","nationality","getClassNameFn","id","patientIndexArg","patientIndex","err","console","switchPatient","contractedfromwhichpatientsuspected","detectedcity","detecteddistrict","detectedstate","agebracket","statepatientnumber","notes","source1","source2","source3","filterByObject","obj","filters","filter","p","every","PatientDB","fetched","setFetched","filteredPatients","setFilteredPatients","pathname","useLocation","setColorMode","scaleMode","setScaleMode","subDays","filterDate","setFilterDate","useLocalStorage","showReminder","setShowReminder","message","setMessage","loading","setLoading","setFilters","scrollTo","useEffectOnce","axios","get","then","response","data","raw_data","reverse","querySelectorAll","forEach","el","setAttribute","handleFilters","label","value","f","newFilters","district","city","display","selectedIndex","getSortedValues","setValues","Set","size","add","Array","from","sort","Helmet","name","content","onChange","defaultValue","disabled","state","minDate","maxDate","calendarIcon","inputProps","onkeydown","e","preventDefault","clearIcon","date","fomattedDate","type","checked"],"mappings":"iKAwBeA,UAAMC,MArBrB,SAAuBC,GACrB,OACE,yBAAKC,UAAU,yBAAyBC,MAAO,CAACC,eAAgB,SAC9D,uBACEF,UAAU,SACVG,OAAO,WACPC,KAAK,6EAEL,kBAAC,IAAD,MALF,IAKoB,uCAEpB,uBACEJ,UAAU,SACVG,OAAO,WACPC,KAAK,uFAEL,kBAAC,IAAD,MALF,IAKoB,0CAMe,WACvC,OAAO,K,kBC0BMC,MAhDf,YAOI,IANFC,EAMC,EANDA,KACAC,EAKC,EALDA,QACAC,EAIC,EAJDA,SACAC,EAGC,EAHDA,WACAC,EAEC,EAFDA,OACAC,EACC,EADDA,WAEA,OACE,yBAAKX,UAAU,oBAAoBC,MAAO,CAACC,eAAgB,OACxDU,OAAOC,KAAKP,GACVQ,MAAMP,GAAW,EAAI,GACrBQ,KAAI,SAACC,EAAKC,GACT,MAAY,iBAARD,EAEA,kBAAC,IAAME,SAAP,CAAgBC,IAAKF,GACnB,wBAAIjB,UAAU,YACXoB,YAAO,IAAIC,KAAKL,GAAM,gBAAiB,IACvC,IAAMV,EAAKU,GAAKM,OAAS,KAE5B,yBAAKH,IAAKF,EAAOjB,UAAS,cAASO,EAAU,UAAY,KACtDD,EAAKU,GACHF,MAAMP,GAAW,GAAK,GACtBQ,KAAI,SAACQ,EAASC,GACb,OACE,yBACEL,IAAKK,EACLxB,UAAWW,EAAWY,GACtBE,QAAS,WACPjB,GAAS,GACTC,EAAWc,KAGb,4BAAKb,EAAM,WAAOa,EAAQG,eAAkB,UAQnD,U,mCC2LJC,MAhOf,SAAkB5B,GAAQ,IAAD,EACS6B,mBAAS7B,EAAM8B,UADxB,mBAChBA,EADgB,KACNC,EADM,OAEOF,mBAAS7B,EAAM8B,SAASf,OAAO,IAFtC,mBAEhBS,EAFgB,KAEPd,EAFO,OAGCmB,mBAAS,IAHV,mBAGhBtB,EAHgB,KAGVyB,EAHU,OAIGH,oBAAS,GAJZ,mBAIhBI,EAJgB,KAITxB,EAJS,KAMvByB,YAAkBD,GAElBE,OAAOC,QAAU,SAAUC,GACzB,IAAMJ,EAAQK,SAASC,eAAe,SAClCF,EAAMjC,SAAW6B,GACnBxB,GAAS,IAIb+B,YAAiB,UAAU,WACzB/B,GAAS,MAGXgC,qBAAU,WACRV,EAAY/B,EAAM8B,YACjB,CAAC9B,EAAM8B,WAEV,IAAMY,EAAcC,uBAAY,SAACb,GAE/B,IADA,IAAMc,EAAM,GACHC,EAAI,EAAGA,EAAIf,EAASP,OAAQsB,IAAK,CACxC,IAAM5B,EAAM,IAAIK,KACdwB,YAAMhB,EAASe,GAAGE,cAAe,aAAc,IAAIzB,OAErD,GAAML,KAAO2B,EAIN,CACL,IAAMI,EAAOJ,EAAI3B,GACjB+B,EAAKC,KAAKnB,EAASe,IACnBD,EAAI3B,GAAO+B,MAPM,CACjB,IAAMA,EAAO,GACbA,EAAKC,KAAKnB,EAASe,IACnBD,EAAI3B,GAAO+B,GAOfhB,EAAQY,KACP,IA8EH,OA5EAH,qBAAU,WACJX,EAASP,QACXmB,EAAYZ,KAEb,CAACY,EAAaZ,IAyEf,kBAAC,IAAMX,SAAP,KACE,kBAAC,EAAD,CACEZ,KAAMA,EACNE,SAAUA,EACVC,WAAYA,EACZC,OAAQX,EAAMW,OACdC,WAhEiB,SAACsC,GACtB,OAAQA,GACN,IAAK,UACH,OAAO,SAAC1B,GACN,MAAM,gBAAN,OACqB,MAAnBA,EAAQ2B,OACJ,WACmB,MAAnB3B,EAAQ2B,OACR,UACA,GALN,YAMInD,EAAMW,OAAS,GAAK,aAE5B,IAAK,eACH,OAAO,SAACa,GACN,MAAM,gBAAN,OACiC,UAA/BA,EAAQ4B,mBACJ,WAC+B,aAA/B5B,EAAQ4B,mBACR,cACA,GALN,YAMIpD,EAAMW,OAAS,GAAK,aAE5B,IAAK,cACH,OAAO,SAACa,GACN,MAAM,gBAAN,OAC0B,UAAxBA,EAAQ6B,YACJ,QACwB,YAAxB7B,EAAQ6B,YACR,QACwB,cAAxB7B,EAAQ6B,YACR,QACwB,mBAAxB7B,EAAQ6B,YACR,QACwB,6BAAxB7B,EAAQ6B,YACR,QACwB,aAAxB7B,EAAQ6B,YACR,QACwB,gBAAxB7B,EAAQ6B,YACR,QACwB,UAAxB7B,EAAQ6B,YACR,QACwB,WAAxB7B,EAAQ6B,YACR,QACA,GAnBN,YAoBIrD,EAAMW,OAAS,GAAK,aAE5B,IAAK,MAIL,QACE,OAAO,SAACa,GACN,MAAM,gBAAN,OAAuBxB,EAAMW,OAAS,GAAK,cAYjC2C,CAAetD,EAAMkD,aAGlCjB,GACC,yBAAKhC,UAAU,QAAQsD,GAAG,SACxB,yBACEtD,UAAS,wBAAmBgC,EAAQ,WAAa,gBAEjD,yBAAKhC,UAAU,gBACb,kBAAC,IAAD,CACEyB,QAAS,WACPjB,GAAS,OAKf,yBAAKR,UAAU,aACb,gCAAMuB,EAAQG,gBAGhB,yBAAK1B,UAAU,QACb,8CACA,4BAAKuB,EAAQuB,cAAgBvB,EAAQuB,cAAgB,KAErD,+CACA,wBACE9C,UAAU,kBACVyB,QAAS,YAxGD,SAAC8B,GACrB,GAAwB,KAApBA,EACJ,IACE,IAAMC,EAAeD,EAAgBzC,MAAM,GAE3Ce,EAASd,KAAI,SAACQ,EAASN,GACjBM,EAAQG,gBAAkB8B,GAAc/C,EAAWc,MAEzD,MAAOkC,GACPC,QAAQf,IAAIc,IAgGAE,CAAcpC,EAAQqC,uCAGvBrC,EAAQqC,oCACLrC,EAAQqC,oCACR,KAGN,6CACA,4BAAKrC,EAAQsC,aAAetC,EAAQsC,aAAe,KAEnD,iDACA,4BACGtC,EAAQuC,iBAAmBvC,EAAQuC,iBAAmB,KAGzD,8CACA,4BAAKvC,EAAQwC,cAAgBxC,EAAQwC,cAAgB,KAErD,2CACA,4BAAKxC,EAAQ6B,YAAc7B,EAAQ6B,YAAc,KAEjD,mCACA,4BAAK7B,EAAQyC,WAAazC,EAAQyC,WAAa,KAE/C,sCACA,4BAAKzC,EAAQ2B,OAAS3B,EAAQ2B,OAAS,KAEvC,oDACA,4BACG3B,EAAQ0C,mBAAqB1C,EAAQ0C,mBAAqB,KAG7D,oDACA,4BACG1C,EAAQ4B,mBAAqB5B,EAAQ4B,mBAAqB,MAI/D,yBAAKnD,UAAU,SACb,qCACA,4BAAKuB,EAAQ2C,QAGf,wCACA,yBAAKlE,UAAU,QACb,uBAAGI,KAAMmB,EAAQ4C,QAAShE,OAAO,YAC9BoB,EAAQ4C,UAIb,wCACA,yBAAKnE,UAAU,QACb,uBAAGI,KAAMmB,EAAQ6C,QAASjE,OAAO,YAC9BoB,EAAQ6C,UAIb,wCACA,yBAAKpE,UAAU,QACb,uBAAGI,KAAMmB,EAAQ8C,QAASlE,OAAO,YAC9BoB,EAAQ8C,c,sFChNzB,SAASC,EAAeC,EAAKC,GAC3B,IAAM3D,EAAOD,OAAOC,KAAK2D,GACzB,OAAOD,EAAIE,QAAO,SAACC,GACjB,OAAO7D,EAAK8D,OAAM,SAACxD,GACjB,OAAKqD,EAAQrD,GAAKG,QACXoD,EAAEvD,KAASqD,EAAQrD,SAqZjByD,UAhZf,SAAmB7E,GAAQ,IAAD,EACM6B,oBAAS,GADf,mBACjBiD,EADiB,KACRC,EADQ,OAEQlD,mBAAS,IAFjB,mBAEjBC,EAFiB,KAEPC,EAFO,OAGwBF,mBAAS,IAHjC,mBAGjBmD,EAHiB,KAGCC,EAHD,KAIjBC,EAAYC,cAAZD,SAJiB,EAKUrD,mBAAS,WALnB,mBAKjBqB,EALiB,KAKNkC,EALM,OAMUvD,oBAAS,GANnB,mBAMjBwD,EANiB,KAMNC,EANM,OAOYzD,mBAAS0D,YAAQ,IAAIjE,KAAQ,IAPzC,mBAOjBkE,EAPiB,KAOLC,EAPK,OAQgBC,YAAgB,gBAAgB,GARhD,mBAQjBC,EARiB,KAQHC,EARG,OASM/D,oBAAS,GATf,mBASjBgE,EATiB,KASRC,EATQ,OAUMjE,oBAAS,GAVf,mBAUjBkE,GAViB,KAURC,GAVQ,QAWMnE,mBAAS,CACrCmC,cAAe,GACfD,iBAAkB,GAClBD,aAAc,GACdf,cAAe1B,YAAOkE,YAAQ,IAAIjE,KAAQ,GAAI,gBAfxB,qBAWjBmD,GAXiB,MAWRwB,GAXQ,MAkBxBxD,qBAAU,WACRN,OAAO+D,SAAS,EAAG,KAClB,CAAChB,IAEJiB,aAAc,WACZ,IACEC,IACGC,IAAI,+CACJC,MAAK,SAACC,GACLxE,EAAYwE,EAASC,KAAKC,SAASC,WACnC3B,GAAW,MAEf,MAAOrB,GACPC,QAAQf,IAAIc,OAIhBjB,qBAAU,WACYH,SAASqE,iBAC3B,wCAEUC,SAAQ,SAACC,GAAD,OAAQA,EAAGC,aAAa,YAAY,QACvD,IAEH,IAAMC,GAAgB,SAACC,EAAOC,GAC5BhB,IAAW,SAACiB,GAEV,IAAMC,EAAU,eAAOD,GAEvB,GADAC,EAAWH,GAASC,EACN,kBAAVD,EAA2B,CAC7B,IAAMI,EAAW9E,SAASC,eAAe,YACnC8E,EAAO/E,SAASC,eAAe,QAEnB6E,EAASlH,MAAMoH,QAAnB,KAAVL,EAAuC,OACb,SAC9BI,EAAKnH,MAAMoH,QAAU,OAErBF,EAASG,cAAgB,EACzBF,EAAKE,cAAgB,EACrBJ,EAAU,iBAAuB,GACjCA,EAAU,aAAmB,QACxB,GAAc,qBAAVH,EAA8B,CACvC,IAAMK,EAAO/E,SAASC,eAAe,QAEnB8E,EAAKnH,MAAMoH,QAAf,KAAVL,EAAmC,OACb,SAE1BI,EAAKE,cAAgB,EACrBJ,EAAU,aAAmB,GAE/B,OAAOA,MAcX,SAASK,GAAgBhD,EAAKpD,GAC5B,IAAMqG,EAAY,IAAIC,IAAIlD,EAAIxD,KAAI,SAAC2D,GAAD,OAAOA,EAAEvD,OAE3C,OADIqG,EAAUE,KAAO,GAAGF,EAAUG,IAAI,IAC1B,kBAARxG,EAAgCyG,MAAMC,KAAKL,GACxCI,MAAMC,KAAKL,GAAWM,OAG/B,OAjBAtF,qBAAU,WACJ8B,EAAezC,EAAU2C,IAASlD,OAAS,GAC7C0D,EAAoBV,EAAezC,EAAU2C,KAC7CqB,GAAW,GACXE,IAAW,IAEXF,GAAW,KAEZ,CAAChE,EAAU2C,KAUZ,yBAAKxE,UAAU,cACb,kBAAC+H,EAAA,EAAD,KACE,kEACA,0BAAMC,KAAK,QAAQC,QAAO,oCAC1B,0BACED,KAAK,cACLC,QAAQ,oFAIZ,yBAAKjI,UAAU,mBAAmBC,MAAO,CAACC,eAAgB,SACxD,yBAAKF,UAAU,gBACb,yBAAKA,UAAU,UACb,4BACEC,MAAO,CAACC,eAAgB,QACxBoD,GAAG,QACH4E,SAAU,SAAC9F,GACT0E,GAAc,gBAAiB1E,EAAMjC,OAAO6G,QAE9CmB,aAAc3D,GAAQT,eAEtB,4BAAQiD,MAAM,GAAGoB,UAAQ,GAAzB,gBAGCb,GAAgB1F,EAAU,iBAAiBd,KAC1C,SAACsH,EAAOpH,GACN,OACE,4BAAQE,IAAKF,EAAO+F,MAAOqB,GACd,KAAVA,EAAe,MAAQA,QAQpC,yBAAKrI,UAAU,UACb,4BACEC,MAAO,CAACC,eAAgB,OAAQmH,QAAS,QACzC/D,GAAG,WACH4E,SAAU,SAAC9F,GACT0E,GAAc,mBAAoB1E,EAAMjC,OAAO6G,QAEjDmB,aAAc3D,GAAQV,kBAEtB,4BAAQkD,MAAM,GAAGoB,UAAQ,GAAzB,mBAGCb,GACCjD,EAAezC,EAAU,CACvBkC,cAAeS,GAAQT,gBAEzB,oBACAhD,KAAI,SAACoG,EAAUlG,GACf,OACE,4BAAQE,IAAKF,EAAO+F,MAAOG,GACX,KAAbA,EAAkB,MAAQA,QAOrC,yBAAKnH,UAAU,UACb,4BACEC,MAAO,CAACC,eAAgB,OAAQmH,QAAS,QACzC/D,GAAG,OACH4E,SAAU,SAAC9F,GACT0E,GAAc,eAAgB1E,EAAMjC,OAAO6G,QAE7CmB,aAAc3D,GAAQX,cAEtB,4BAAQmD,MAAM,GAAGoB,UAAQ,GAAzB,eAGCb,GACCjD,EAAezC,EAAU,CACvBkC,cAAeS,GAAQT,cACvBD,iBAAkBU,GAAQV,mBAE5B,gBACA/C,KAAI,SAACqG,EAAMnG,GACX,OACE,4BAAQE,IAAKF,EAAO+F,MAAOI,GACf,KAATA,EAAc,MAAQA,QAOjC,yBAAKpH,UAAU,UACb,4BACEC,MAAO,CAACC,eAAgB,OAAQmH,QAAS,QACzC/D,GAAG,OACH4E,SAAU,SAAC9F,GACT0E,GAAc,eAAgB1E,EAAMjC,OAAO6G,QAE7CmB,aAAc3D,GAAQX,cAEtB,4BAAQmD,MAAM,GAAGoB,UAAQ,GAAzB,eAGCb,GACCjD,EAAezC,EAAU,CACvBkC,cAAeS,GAAQT,cACvBD,iBAAkBU,GAAQV,mBAE5B,gBACA/C,KAAI,SAACqG,EAAMnG,GACX,OACE,4BAAQE,IAAKF,EAAO+F,MAAOI,GACf,KAATA,EAAc,MAAQA,QAOjC,yBAAKpH,UAAU,UACb,kBAAC,IAAD,CACEgH,MAAOzB,EACP+C,QAAS,IAAIjH,KAAK,eAClBkH,QAASjD,YAAQ,IAAIjE,KAAQ,GAC7BD,OAAO,UACPoH,aAAc,kBAAC,IAAD,MACdC,WACGC,UAAY,SAACC,GACZA,EAAEC,kBAGNC,UAAW,kBAAC,IAAD,MACXX,SAAU,SAACY,GACTtD,EAAcsD,GACd,IAAMC,EAAiBD,EAAO1H,YAAO0H,EAAM,cAAgB,GAC3DhC,GAAc,gBAAiBiC,QAyBvC,yBAAK/I,UAAU,UACE,YAAdiD,GACC,yBAAKjD,UAAU,eACb,yBAAKA,UAAU,qBACf,wBAAIA,UAAU,aAAd,UACA,yBAAKA,UAAU,mBACf,wBAAIA,UAAU,WAAd,QACA,yBAAKA,UAAU,WACf,wBAAIA,UAAU,IAAd,YAIW,iBAAdiD,GACC,yBAAKjD,UAAU,eACb,yBAAKA,UAAU,oBACf,wBAAIA,UAAU,YAAd,SACA,yBAAKA,UAAU,uBACf,wBAAIA,UAAU,eAAd,YACA,yBAAKA,UAAU,WACf,wBAAIA,UAAU,IAAd,YAIW,gBAAdiD,GACC,yBAAKjD,UAAU,2BACb,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,eAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,MACA,yBAAKA,UAAU,iBACf,wBAAIA,UAAU,SAAd,OAIJ,yBAAKA,UAAS,iBAAYiD,IACxB,4BACEhD,MAAO,CAACC,eAAgB,QACxBgI,SAAU,SAAC9F,GACT+C,EAAa/C,EAAMjC,OAAO6G,QAE5BmB,aAAclF,GAKd,4BAAQ+D,MAAM,WAAd,WACA,4BAAQA,MAAM,gBAAd,gBACA,4BAAQA,MAAM,eAAd,mBAOR,yBAAKhH,UAAU,kBAAkBC,MAAO,CAACC,eAAgB,SACvD,6BACE,4CAEA,yBACEF,UAAS,oBACP4F,GAAuC,IAA5Bb,EAAiBzD,OAAe,WAAa,KAG1D,sCACA,2BACE0H,KAAK,WACLC,QAAS7D,EACTgD,SAAUxC,GAAuC,IAA5Bb,EAAiBzD,OACtC4G,SAAU,SAAC9F,GACTiD,GAAcD,IAEhBpF,UAAU,aAIhB,wBAAIA,UAAU,cAAd,4HAMF,yBACEA,UAAU,oBACVC,MAAO,CAACC,eAAgB,KAAMmH,QAAS3B,EAAe,GAAK,SAE3D,kBAAC,IAAD,CACEjE,QAAS,WACPkE,GAAgB,MAGpB,0SAME,6BACA,6BAPF,gCAYDd,GACC,yBAAK7E,UAAU,qBACZ8F,GACC,IACEF,EACF,yBAAK5F,UAAU,aACb,yDAEE,8BACGwE,GAAQX,aAAavC,OAAS,EAA9B,WACOkD,GAAQX,aADf,MAEG,GACHW,GAAQV,iBAAiBxC,OAAS,EAAlC,WACOkD,GAAQV,iBADf,MAEG,GACH,IAAMU,GAAQT,eACT,IAVV,MAWK,8BAAOS,GAAQ1B,cAAf,OAIP,kBAAC,EAAD,CACEjB,SAAUkD,EACV9B,UAAWA,EACXvC,OAAQ0E,KAMhB,kBAAC,EAAD,CAAevD,SAAUA,IACzB,kBAAC,IAAD","file":"static/js/9.9ebd141c.chunk.js","sourcesContent":["import React from 'react';\nimport * as Icon from 'react-feather';\n\nfunction DownloadBlock(props) {\n  return (\n    <div className=\"DownloadBlock fadeInUp\" style={{animationDelay: '0.5s'}}>\n      <a\n        className=\"button\"\n        target=\"_noblank\"\n        href=\"https://raw.githubusercontent.com/covid19india/api/gh-pages/raw_data.json\"\n      >\n        <Icon.Download /> <span>JSON</span>\n      </a>\n      <a\n        className=\"button\"\n        target=\"_noblank\"\n        href=\"https://raw.githubusercontent.com/covid19india/api/gh-pages/csv/latest/raw_data.csv\"\n      >\n        <Icon.Download /> <span>CSV</span>\n      </a>\n    </div>\n  );\n}\n\nexport default React.memo(DownloadBlock, () => {\n  return true;\n});\n","import {format} from 'date-fns';\nimport React from 'react';\n\nfunction PatientsView({\n  logs,\n  summary,\n  setModal,\n  setPatient,\n  expand,\n  applyClass,\n}) {\n  return (\n    <div className=\"Patients fadeInUp\" style={{animationDelay: '1s'}}>\n      {Object.keys(logs)\n        .slice(summary ? -1 : 0)\n        .map((day, index) => {\n          if (day !== 'Invalid Date') {\n            return (\n              <React.Fragment key={index}>\n                <h5 className=\"daylabel\">\n                  {format(new Date(day), 'dd MMM, yyyy')}{' '}\n                  {'(' + logs[day].length + ')'}\n                </h5>\n                <div key={index} className={`day ${summary ? 'summary' : ''}`}>\n                  {logs[day]\n                    .slice(summary ? -40 : 0)\n                    .map((patient, indexTwo) => {\n                      return (\n                        <div\n                          key={indexTwo}\n                          className={applyClass(patient)}\n                          onClick={() => {\n                            setModal(true);\n                            setPatient(patient);\n                          }}\n                        >\n                          <h3>{expand ? `P${patient.patientnumber}` : ''}</h3>\n                        </div>\n                      );\n                    })}\n                </div>\n              </React.Fragment>\n            );\n          } else {\n            return null;\n          }\n        })}\n    </div>\n  );\n}\n\nexport default PatientsView;\n","import PatientsView from './patientsview';\n\nimport {parse} from 'date-fns';\nimport React, {useState, useEffect, useCallback} from 'react';\nimport * as Icon from 'react-feather';\nimport {useLockBodyScroll, useKeyPressEvent} from 'react-use';\n\nfunction Patients(props) {\n  const [patients, setPatients] = useState(props.patients);\n  const [patient, setPatient] = useState(props.patients.slice(-1));\n  const [logs, setLogs] = useState({});\n  const [modal, setModal] = useState(false);\n\n  useLockBodyScroll(modal);\n\n  window.onclick = function (event) {\n    const modal = document.getElementById('modal');\n    if (event.target === modal) {\n      setModal(false);\n    }\n  };\n\n  useKeyPressEvent('Escape', () => {\n    setModal(false);\n  });\n\n  useEffect(() => {\n    setPatients(props.patients);\n  }, [props.patients]);\n\n  const parseByDate = useCallback((patients) => {\n    const log = {};\n    for (let i = 0; i < patients.length; i++) {\n      const day = new Date(\n        parse(patients[i].dateannounced, 'dd/MM/yyyy', new Date())\n      );\n      if (!(day in log)) {\n        const list = [];\n        list.push(patients[i]);\n        log[day] = list;\n      } else {\n        const list = log[day];\n        list.push(patients[i]);\n        log[day] = list;\n      }\n    }\n    setLogs(log);\n  }, []);\n\n  useEffect(() => {\n    if (patients.length) {\n      parseByDate(patients);\n    }\n  }, [parseByDate, patients]);\n\n  const switchPatient = (patientIndexArg) => {\n    if (patientIndexArg === '') return;\n    try {\n      const patientIndex = patientIndexArg.slice(1);\n      // eslint-disable-next-line\n      patients.map((patient, index) => {\n        if (patient.patientnumber === patientIndex) setPatient(patient);\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const getClassNameFn = (colorMode) => {\n    switch (colorMode) {\n      case 'genders':\n        return (patient) => {\n          return `patient-card ${\n            patient.gender === 'F'\n              ? 'is-femme'\n              : patient.gender === 'M'\n              ? 'is-male'\n              : ''\n          } ${props.expand ? '' : 'is-small'}`;\n        };\n      case 'transmission':\n        return (patient) => {\n          return `patient-card ${\n            patient.typeoftransmission === 'Local'\n              ? 'is-local'\n              : patient.typeoftransmission === 'Imported'\n              ? 'is-imported'\n              : ''\n          } ${props.expand ? '' : 'is-small'}`;\n        };\n      case 'nationality':\n        return (patient) => {\n          return `patient-card ${\n            patient.nationality === 'India'\n              ? 'is-in'\n              : patient.nationality === 'Myanmar'\n              ? 'is-mm'\n              : patient.nationality === 'Indonesia'\n              ? 'is-id'\n              : patient.nationality === 'United Kingdom'\n              ? 'is-uk'\n              : patient.nationality === 'United States of America'\n              ? 'is-us'\n              : patient.nationality === 'Thailand'\n              ? 'is-th'\n              : patient.nationality === 'Phillipines'\n              ? 'is-ph'\n              : patient.nationality === 'Italy'\n              ? 'is-it'\n              : patient.nationality === 'Canada'\n              ? 'is-ca'\n              : ''\n          } ${props.expand ? '' : 'is-small'}`;\n        };\n      case 'age':\n        return (patient) => {\n          return `patient-card ${props.expand ? '' : 'is-small'}`;\n        };\n      default:\n        return (patient) => {\n          return `patient-card ${props.expand ? '' : 'is-small'}`;\n        };\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <PatientsView\n        logs={logs}\n        setModal={setModal}\n        setPatient={setPatient}\n        expand={props.expand}\n        applyClass={getClassNameFn(props.colorMode)}\n      />\n\n      {modal && (\n        <div className=\"modal\" id=\"modal\">\n          <div\n            className={`modal-content ${modal ? 'fadeInUp' : 'fadeOutDown'}`}\n          >\n            <div className=\"close-button\">\n              <Icon.XCircle\n                onClick={() => {\n                  setModal(false);\n                }}\n              />\n            </div>\n\n            <div className=\"modal-top\">\n              <h1>#{patient.patientnumber}</h1>\n            </div>\n\n            <div className=\"meta\">\n              <h5>Date Announced</h5>\n              <h3>{patient.dateannounced ? patient.dateannounced : '?'}</h3>\n\n              <h5>Contracted from</h5>\n              <h3\n                className=\"contracted-from\"\n                onClick={() => {\n                  switchPatient(patient.contractedfromwhichpatientsuspected);\n                }}\n              >\n                {patient.contractedfromwhichpatientsuspected\n                  ? patient.contractedfromwhichpatientsuspected\n                  : '?'}\n              </h3>\n\n              <h5>Detected City</h5>\n              <h3>{patient.detectedcity ? patient.detectedcity : '?'}</h3>\n\n              <h5>Detected District</h5>\n              <h3>\n                {patient.detecteddistrict ? patient.detecteddistrict : '?'}\n              </h3>\n\n              <h5>Detected State</h5>\n              <h3>{patient.detectedstate ? patient.detectedstate : '?'}</h3>\n\n              <h5>Nationality</h5>\n              <h3>{patient.nationality ? patient.nationality : '?'}</h3>\n\n              <h5>Age</h5>\n              <h3>{patient.agebracket ? patient.agebracket : '?'}</h3>\n\n              <h5>Gender</h5>\n              <h3>{patient.gender ? patient.gender : '?'}</h3>\n\n              <h5>State Patient Number</h5>\n              <h3>\n                {patient.statepatientnumber ? patient.statepatientnumber : '?'}\n              </h3>\n\n              <h5>Type of transmission</h5>\n              <h3>\n                {patient.typeoftransmission ? patient.typeoftransmission : '?'}\n              </h3>\n            </div>\n\n            <div className=\"notes\">\n              <h5>Notes</h5>\n              <h3>{patient.notes}</h3>\n            </div>\n\n            <h5>Source 1</h5>\n            <div className=\"link\">\n              <a href={patient.source1} target=\"_noblank\">\n                {patient.source1}\n              </a>\n            </div>\n\n            <h5>Source 2</h5>\n            <div className=\"link\">\n              <a href={patient.source2} target=\"_noblank\">\n                {patient.source2}\n              </a>\n            </div>\n\n            <h5>Source 3</h5>\n            <div className=\"link\">\n              <a href={patient.source3} target=\"_noblank\">\n                {patient.source3}\n              </a>\n            </div>\n          </div>\n        </div>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default Patients;\n","import DownloadBlock from './downloadblock';\nimport Footer from './footer';\nimport Patients from './patients';\n\nimport axios from 'axios';\nimport {format, subDays} from 'date-fns';\nimport React, {useState, useEffect} from 'react';\nimport DatePicker from 'react-date-picker';\nimport * as Icon from 'react-feather';\nimport {Helmet} from 'react-helmet';\nimport {useLocation} from 'react-router-dom';\nimport {useEffectOnce, useLocalStorage} from 'react-use';\n\nfunction filterByObject(obj, filters) {\n  const keys = Object.keys(filters);\n  return obj.filter((p) => {\n    return keys.every((key) => {\n      if (!filters[key].length) return true;\n      return p[key] === filters[key];\n    });\n  });\n}\n\nfunction PatientDB(props) {\n  const [fetched, setFetched] = useState(false);\n  const [patients, setPatients] = useState([]);\n  const [filteredPatients, setFilteredPatients] = useState([]);\n  const {pathname} = useLocation();\n  const [colorMode, setColorMode] = useState('genders');\n  const [scaleMode, setScaleMode] = useState(false);\n  const [filterDate, setFilterDate] = useState(subDays(new Date(), 1));\n  const [showReminder, setShowReminder] = useLocalStorage('showReminder', true);\n  const [message, setMessage] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [filters, setFilters] = useState({\n    detectedstate: '',\n    detecteddistrict: '',\n    detectedcity: '',\n    dateannounced: format(subDays(new Date(), 1), 'dd/MM/yyyy'),\n  });\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  useEffectOnce(() => {\n    try {\n      axios\n        .get('https://api.covid19india.org/raw_data3.json')\n        .then((response) => {\n          setPatients(response.data.raw_data.reverse());\n          setFetched(true);\n        });\n    } catch (err) {\n      console.log(err);\n    }\n  });\n\n  useEffect(() => {\n    const datePickers = document.querySelectorAll(\n      '.react-date-picker__inputGroup input'\n    );\n    datePickers.forEach((el) => el.setAttribute('readOnly', true));\n  }, []);\n\n  const handleFilters = (label, value) => {\n    setFilters((f) => {\n      // Create new object (deep copy)\n      const newFilters = {...f};\n      newFilters[label] = value;\n      if (label === 'detectedstate') {\n        const district = document.getElementById('district');\n        const city = document.getElementById('city');\n        // Hide boxes\n        if (value === '') district.style.display = 'none';\n        else district.style.display = 'inline';\n        city.style.display = 'none';\n        // Default to empty selection\n        district.selectedIndex = 0;\n        city.selectedIndex = 0;\n        newFilters['detecteddistrict'] = '';\n        newFilters['detectedcity'] = '';\n      } else if (label === 'detecteddistrict') {\n        const city = document.getElementById('city');\n        // Hide box\n        if (value === '') city.style.display = 'none';\n        else city.style.display = 'inline';\n        // Default to empty selection\n        city.selectedIndex = 0;\n        newFilters['detectedcity'] = '';\n      }\n      return newFilters;\n    });\n  };\n\n  useEffect(() => {\n    if (filterByObject(patients, filters).length > 0) {\n      setFilteredPatients(filterByObject(patients, filters));\n      setMessage(false);\n      setLoading(false);\n    } else {\n      setMessage(true);\n    }\n  }, [patients, filters]);\n\n  function getSortedValues(obj, key) {\n    const setValues = new Set(obj.map((p) => p[key]));\n    if (setValues.size > 1) setValues.add('');\n    if (key === 'dateannounced') return Array.from(setValues);\n    return Array.from(setValues).sort();\n  }\n\n  return (\n    <div className=\"PatientsDB\">\n      <Helmet>\n        <title>Demographics - covid19india.org</title>\n        <meta name=\"title\" content={`Demographics - covid19india.org`} />\n        <meta\n          name=\"description\"\n          content=\"A demographical overview of the Indian population affected by the coronavirus.\"\n        />\n      </Helmet>\n\n      <div className=\"filters fadeInUp\" style={{animationDelay: '0.2s'}}>\n        <div className=\"filters-left\">\n          <div className=\"select\">\n            <select\n              style={{animationDelay: '0.3s'}}\n              id=\"state\"\n              onChange={(event) => {\n                handleFilters('detectedstate', event.target.value);\n              }}\n              defaultValue={filters.detectedstate}\n            >\n              <option value=\"\" disabled>\n                Select State\n              </option>\n              {getSortedValues(patients, 'detectedstate').map(\n                (state, index) => {\n                  return (\n                    <option key={index} value={state}>\n                      {state === '' ? 'All' : state}\n                    </option>\n                  );\n                }\n              )}\n            </select>\n          </div>\n\n          <div className=\"select\">\n            <select\n              style={{animationDelay: '0.4s', display: 'none'}}\n              id=\"district\"\n              onChange={(event) => {\n                handleFilters('detecteddistrict', event.target.value);\n              }}\n              defaultValue={filters.detecteddistrict}\n            >\n              <option value=\"\" disabled>\n                Select District\n              </option>\n              {getSortedValues(\n                filterByObject(patients, {\n                  detectedstate: filters.detectedstate,\n                }),\n                'detecteddistrict'\n              ).map((district, index) => {\n                return (\n                  <option key={index} value={district}>\n                    {district === '' ? 'All' : district}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n\n          <div className=\"select\">\n            <select\n              style={{animationDelay: '0.4s', display: 'none'}}\n              id=\"city\"\n              onChange={(event) => {\n                handleFilters('detectedcity', event.target.value);\n              }}\n              defaultValue={filters.detectedcity}\n            >\n              <option value=\"\" disabled>\n                Select City\n              </option>\n              {getSortedValues(\n                filterByObject(patients, {\n                  detectedstate: filters.detectedstate,\n                  detecteddistrict: filters.detecteddistrict,\n                }),\n                'detectedcity'\n              ).map((city, index) => {\n                return (\n                  <option key={index} value={city}>\n                    {city === '' ? 'All' : city}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n\n          <div className=\"select\">\n            <select\n              style={{animationDelay: '0.4s', display: 'none'}}\n              id=\"city\"\n              onChange={(event) => {\n                handleFilters('detectedcity', event.target.value);\n              }}\n              defaultValue={filters.detectedcity}\n            >\n              <option value=\"\" disabled>\n                Select City\n              </option>\n              {getSortedValues(\n                filterByObject(patients, {\n                  detectedstate: filters.detectedstate,\n                  detecteddistrict: filters.detecteddistrict,\n                }),\n                'detectedcity'\n              ).map((city, index) => {\n                return (\n                  <option key={index} value={city}>\n                    {city === '' ? 'All' : city}\n                  </option>\n                );\n              })}\n            </select>\n          </div>\n\n          <div className=\"select\">\n            <DatePicker\n              value={filterDate}\n              minDate={new Date('30-Jan-2020')}\n              maxDate={subDays(new Date(), 1)}\n              format=\"dd/MM/y\"\n              calendarIcon={<Icon.Calendar />}\n              inputProps={\n                (onkeydown = (e) => {\n                  e.preventDefault();\n                })\n              }\n              clearIcon={<Icon.XCircle />}\n              onChange={(date) => {\n                setFilterDate(date);\n                const fomattedDate = !!date ? format(date, 'dd/MM/yyyy') : '';\n                handleFilters('dateannounced', fomattedDate);\n              }}\n            />\n          </div>\n\n          {/* <div className=\"select\">\n            <select\n              style={{animationDelay: '0.4s'}}\n              onChange={(event) => {\n                handleFilters('dateannounced', event.target.value);\n              }}\n            >\n              {Array.from(new Set(patients.map((p) => p.dateannounced))).map(\n                (date, index) => {\n                  return (\n                    <option key={index} value={date}>\n                      {date}\n                    </option>\n                  );\n                }\n              )}\n            </select>\n          </div>*/}\n        </div>\n\n        <div className=\"legend\">\n          {colorMode === 'genders' && (\n            <div className=\"legend-left\">\n              <div className=\"circle is-female\"></div>\n              <h5 className=\"is-female\">Female</h5>\n              <div className=\"circle is-male\"></div>\n              <h5 className=\"is-male\">Male</h5>\n              <div className=\"circle\"></div>\n              <h5 className=\"\">Unknown</h5>\n            </div>\n          )}\n\n          {colorMode === 'transmission' && (\n            <div className=\"legend-left\">\n              <div className=\"circle is-local\"></div>\n              <h5 className=\"is-local\">Local</h5>\n              <div className=\"circle is-imported\"></div>\n              <h5 className=\"is-imported\">Imported</h5>\n              <div className=\"circle\"></div>\n              <h5 className=\"\">Unknown</h5>\n            </div>\n          )}\n\n          {colorMode === 'nationality' && (\n            <div className=\"legend-left nationality\">\n              <div className=\"circle is-in\"></div>\n              <h5 className=\"is-in\">In</h5>\n              <div className=\"circle is-uk\"></div>\n              <h5 className=\"is-uk\">Uk</h5>\n              <div className=\"circle is-us\"></div>\n              <h5 className=\"is-us\">Us</h5>\n              <div className=\"circle is-th\"></div>\n              <h5 className=\"is-thailand\">Th</h5>\n              <div className=\"circle is-ph\"></div>\n              <h5 className=\"is-ph\">Ph</h5>\n              <div className=\"circle is-it\"></div>\n              <h5 className=\"is-it\">It</h5>\n              <div className=\"circle is-ca\"></div>\n              <h5 className=\"is-ca\">Ca</h5>\n              <div className=\"circle is-id\"></div>\n              <h5 className=\"is-id\">Id</h5>\n              <div className=\"circle is-mm\"></div>\n              <h5 className=\"is-mm\">Mm</h5>\n            </div>\n          )}\n\n          <div className={`select ${colorMode}`}>\n            <select\n              style={{animationDelay: '0.4s'}}\n              onChange={(event) => {\n                setColorMode(event.target.value);\n              }}\n              defaultValue={colorMode}\n            >\n              {/* <option value=\"\" disabled>\n                Color modes\n              </option> */}\n              <option value=\"genders\">Genders</option>\n              <option value=\"transmission\">Transmission</option>\n              <option value=\"nationality\">Nationality</option>\n              {/* <option value=\"age\">Age</option>*/}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"header fadeInUp\" style={{animationDelay: '0.3s'}}>\n        <div>\n          <h1>Demographics</h1>\n\n          <div\n            className={`deep-dive ${\n              message || filteredPatients.length === 0 ? 'disabled' : ''\n            }`}\n          >\n            <h5>Expand</h5>\n            <input\n              type=\"checkbox\"\n              checked={scaleMode}\n              disabled={message || filteredPatients.length === 0}\n              onChange={(event) => {\n                setScaleMode(!scaleMode);\n              }}\n              className=\"switch\"\n            />\n          </div>\n        </div>\n        <h6 className=\"disclaimer\">\n          Some of the data provided might be missing/unknown as the details have\n          not been shared by the state/central governments\n        </h6>\n      </div>\n\n      <div\n        className=\"reminder fadeInUp\"\n        style={{animationDelay: '1s', display: showReminder ? '' : 'none'}}\n      >\n        <Icon.XCircle\n          onClick={() => {\n            setShowReminder(false);\n          }}\n        />\n        <p>\n          It is important that we do not think of these as just tiny boxes,\n          numbers, or just another part of statistics - among these are our\n          neighbors, our teachers, our healthcare workers, our supermarket\n          vendors, our friends, our co-workers, our children or our\n          grandparents.\n          <br />\n          <br />\n          Among these are our people.\n        </p>\n      </div>\n\n      {fetched && (\n        <div className=\"patientdb-wrapper\">\n          {loading ? (\n            ' '\n          ) : message ? (\n            <div className=\"no-result\">\n              <h5>\n                There were no new cases in\n                <span>\n                  {filters.detectedcity.length > 0\n                    ? ` ${filters.detectedcity}, `\n                    : ''}\n                  {filters.detecteddistrict.length > 0\n                    ? ` ${filters.detecteddistrict}, `\n                    : ''}\n                  {' ' + filters.detectedstate}\n                </span>{' '}\n                on <span>{filters.dateannounced}.</span>\n              </h5>\n            </div>\n          ) : (\n            <Patients\n              patients={filteredPatients}\n              colorMode={colorMode}\n              expand={scaleMode}\n            />\n          )}\n        </div>\n      )}\n\n      <DownloadBlock patients={patients} />\n      <Footer />\n    </div>\n  );\n}\n\nexport default PatientDB;\n"],"sourceRoot":""}