{"version":3,"sources":["components/footer.js","utils/hooks.js","components/tooltips.js","components/level.js","components/minigraph.js","components/maplegend.js","components/choropleth.js","components/mapexplorer.js","components/timeseries.js","components/timeseriesexplorer.js","components/search.js","components/row.js","components/table.js","components/updates.js","components/home.js"],"names":["React","memo","props","t","useTranslation","className","style","animationDelay","href","target","rel","justifyContent","useResizeObserver","ref","useState","dimensions","setDimensions","useEffect","observeTarget","current","resizeObserver","ResizeObserver","entries","observer","forEach","entry","index","contentRect","observe","unobserve","testedToolTip","onClick","e","stopPropagation","data-for","data-tip","data-event","data-event-off","id","place","type","effect","multiline","scrollHide","globalEventOff","data","setData","useEffectOnce","active","confirmed","recovered","deaths","deltaconfirmed","deltadeaths","deltarecovered","isNaN","formatNumber","timeseries","timeSeriesData","setTimeSeriesData","svgRef1","useRef","svgRef2","svgRef3","svgRef4","slice","length","graphData","useCallback","margin","chartRight","chartBottom","svg1","d3","svg2","svg3","svg4","d","dailyconfirmed","dailyrecovered","dailydeceased","xScale","domain","date","range","svgArray","dataTypes","colors","dailyMin","dailyactive","dailyMax","Math","max","domainMinMax","yScale","svg","i","color","path","append","datum","attr","x","y","curve","totalLength","node","getTotalLength","transition","delay","duration","selectAll","enter","on","width","height","viewBox","preserveAspectRatio","MapLegend","mapScale","statistic","mapStatistic","mapOption","svgRef","wrapperRef","getBoundingClientRect","MAP_STATISTICS","ZONE","call","legend","tickValues","marginLeft","marginRight","ordinalWeights","Object","values","HOTSPOTS","select","remove","domainMax","join","copy","tickSize","tickPadding","tickFormat","g","title","capitalizeAll","PER_MILLION","ticks","n","TOTAL","Number","isInteger","position","marginTop","marginBottom","tickAdjust","interpolate","min","rangeRound","ramp","toDataURL","interpolator","assign","undefined","round","map","invertExtent","thresholds","quantiles","thresholdFormat","widthScale","reduce","a","b","xPos","w","acc","bandwidth","text","canvas","context","getContext","fillStyle","fillRect","caseColor","caseType","alpha","ChoroplethMap","mapData","currentMap","changeMap","regionHighlighted","setRegionHighlighted","isCountryLoaded","mapMeta","MAP_META","name","geoDataResponse","useSWR","geoDataFile","file","useMemo","stat","clamp","nice","colorInterpolator","geoData","topology","topojson","objects","graphObjectStates","graphObjectDistricts","widthDefault","heightDefault","projection","fitWidth","fitSize","bBox","bounds","split","features","view","MAP_VIEWS","STATES","f","district","properties","state","st_nm","obj","onceTouchedRegion","regionSelection","sel","region","mapType","MAP_TYPES","STATE","this","parseFloat","total","toFixed","toString","circlesData","value","Unknown","sort","centroid","meshStates","COUNTRY","meshDistricts","DISTRICTS","highlightRegionInMap","each","highlighted","parentNode","appendChild","Fragment","colorInterpolationFilters","getRegionFromState","mapName","states","districts","zones","stateTestData","anchor","setAnchor","setMapOption","setCurrentMap","currentMapMeta","currentMapData","dtype","keys","acc1","acc2","zone","typeCount","parseInt","STATE_POPULATIONS","districtWiseData","districtData","Total","stateData","find","getRegionFromDistrict","hoveredRegion","panelRegion","hoveredRegionCount","hoveredRegionZone","switchMapToState","newMapMeta","topDistrict","filter","ReactDOM","unstable_batchedUpdates","testObj","display","window","innerWidth","action","totaltested","parse","updatedon","Date","formatDayMonth","source","lastupdatedtime","formatDate","formatLastUpdated","to","STATE_CODES_REVERSE","prevProps","currProps","equal","timeseriesProp","chartType","mode","logMode","stateCode","Infinity","lastDaysCount","setLastDaysCount","setTimeseries","datapoint","setDatapoint","setIndex","moving","setMoving","svgRef5","transformTimeSeries","slicedTimeseries","sliceTimeseriesFromEnd","T","yScales","svg5","dateMin","subDays","dateMax","addDays","numTicksX","xAxis","tick","formatTimeseriesTickX","xAxis2","yAxis","plotTotal","dataTypesTotal","dataTypesDaily","uniformScaleMin","totalactive","totalrecovered","totaldeceased","uniformScaleMax","totalconfirmed","yScaleUniformLinear","yScaleUniformLog","yScaleLinear","yScaleLog","yScaleDailyUniform","focus","mousemove","xm","invert","bisectDate","left","j","mouseout","typeTotal","typeDaily","filteredTimeseries","reverse","p","getPointAtLength","repeat","dateStr","formatTimeseriesDate","chartKey1","chartKey2","chartKey3","chartKey4","chartKey5","currentStatusCount","currentDiff","formatedDiff","aria-label","isIntersecting","activeStateCode","onHighlightState","useLocalStorage","setChartType","isTimeseriesIntersecting","setIsTimeseriesIntersecting","timeseriesMode","setTimeseriesMode","timeseriesLogMode","setTimeseriesLogMode","options","rootMargin","onChange","htmlFor","checked","event","disabled","selectedState","selectedOptions","getAttribute","JSON","s","statecode","key","statedata","stringify","engine","Bloodhound","initialize","local","STATE_CODES_ARRAY","queryTokenizer","tokenizers","whitespace","datumTokenizer","districtEngine","limit","indexRemote","remote","url","transform","response","stateName","districtName","push","essentialsEngine","resources","essentialSuggestions","locationSuggestions","SearchLoader","useMeasure","svgElement","speed","rx","ry","districtZones","searchValue","setSearchValue","expand","setExpand","results","setResults","searchInput","handleSearch","essentialsSync","datums","result","essentialsObj","nameoftheorganisation","category","website","contact","description","descriptionandorserviceprovided","city","phonenumber","search","stateObj","route","code","districtObj","setNativeValue","element","valueSetter","getOwnPropertyDescriptor","set","prototype","getPrototypeOf","prototypeValueSetter","useDebounce","onFocus","onBlur","STATE_CODES","size","capitalize","ESSENTIALS_CATEGORIES","onMouseDown","preventDefault","dispatchEvent","Event","bubbles","suggestion","useBreakpoint","createBreakpoint","XL","L","S","StateCell","ArrowUp","classnames","DistrictHeaderCell","handleSort","sortData","breakpoint","abbreviate","sortColumn","isAscending","DistrictCell","delta","DistrictRow","onHighlightDistrict","sortedDistricts","onMouseEnter","notes","DISTRICT_ROW_STATISTICS","setSortedDistricts","showDistricts","setShowDistricts","setSortData","history","useHistory","Chevron","rotateRightDown","rotateDownRight","_onHighlightState","doSort","sorted","district1","district2","localeCompare","newSortData","statenotes","STATE_ROW_STATISTICS","colSpan","paddingBottom","align","StateHeaderCell","sortedStates","setSortedStates","FineprintTop","FineprintBottom","newSortedStates","newDate","currentDate","Updates","updates","setUpdates","axios","get","then","catch","err","console","log","useLayoutEffect","format","activity","update","replace","activityDate","timestamp","getDate","formatDistance","dangerouslySetInnerHTML","__html","Home","setStates","stateDistrictWiseData","setStateDistrictWiseData","setDistrictZones","setStateTestData","lastUpdated","setLastUpdated","fetched","setFetched","showUpdates","setShowUpdates","lastViewedLog","setLastViewedLog","newUpdate","setNewUpdate","Bell","BellOff","getStates","lastTimestamp","Promise","all","statesDailyResponse","zonesResponse","stateDistrictWiseResponse","statewise","parseDistrictZones","ts","parseStateTimeseries","preprocessTimeseries","cases_time_series","testTs","parseStateTestTimeseries","states_tested_data","parseTotalTestTimeseries","tested","tsMerged","mergeTimeseries","testData","parseStateTestData","totalTest","totalsamplestested","updatetimestamp","Helmet","content","formatDateAbsolute","summary"],"mappings":"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","file":"static/js/Home.ab45dbdc.chunk.js","sourcesContent":["import React from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\n\nfunction Footer(props) {\n  const {t} = useTranslation();\n\n  return (\n    <footer className=\"fadeInUp\" style={{animationDelay: '2s'}}>\n      <h5>{t('We stand with everyone fighting on the frontlines')}</h5>\n\n      <div className=\"link\">\n        <a\n          href=\"https://github.com/covid19india\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          covid19india\n        </a>\n      </div>\n\n      <a\n        href=\"https://github.com/covid19india/covid19india-react\"\n        className=\"button github\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Icon.GitHub />\n        <span>{t('Open Sourced on GitHub')}</span>\n      </a>\n\n      <a\n        className=\"button excel\"\n        href=\"http://patientdb.covid19india.org\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Icon.Database />\n        <span>{t('Crowdsourced Patient Database')}</span>\n      </a>\n\n      <a\n        href=\"https://twitter.com/covid19indiaorg\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"button twitter\"\n        style={{justifyContent: 'center'}}\n      >\n        <Icon.Twitter />\n        <span>{t('View updates on Twitter')}</span>\n      </a>\n\n      <a\n        href=\"https://bit.ly/covid19crowd\"\n        className=\"button telegram\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <Icon.MessageCircle />\n        <span>{t('Join Telegram to Collaborate!')}</span>\n      </a>\n    </footer>\n  );\n}\n\nexport default React.memo(Footer);\n","import {ResizeObserver} from '@juggle/resize-observer';\nimport {useState, useEffect} from 'react';\n\nexport const useResizeObserver = (ref) => {\n  const [dimensions, setDimensions] = useState(null);\n  useEffect(() => {\n    const observeTarget = ref.current;\n    const resizeObserver = new ResizeObserver((entries, observer) => {\n      entries.forEach((entry, index) => {\n        setDimensions(entry.contentRect);\n      });\n    });\n    resizeObserver.observe(observeTarget);\n    return () => {\n      resizeObserver.unobserve(observeTarget);\n    };\n  }, [ref]);\n  return dimensions;\n};\n","import React from 'react';\nimport * as Icon from 'react-feather';\nimport ReactTooltip from 'react-tooltip';\n\nexport const testedToolTip = (\n  <span className=\"tooltip-tested\" onClick={(e) => e.stopPropagation()}>\n    <Icon.Info\n      data-for=\"tested\"\n      data-tip=\"Reporting total samples tested from ICMR data\"\n      data-event=\"touchstart mouseover\"\n      data-event-off=\"mouseleave\"\n    />\n    <ReactTooltip\n      id=\"tested\"\n      place=\"top\"\n      type=\"dark\"\n      effect=\"solid\"\n      multiline={true}\n      scrollHide={true}\n      globalEventOff=\"click\"\n    />\n  </span>\n);\n","import {formatNumber} from '../utils/commonfunctions';\n\nimport React, {useState} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {useEffectOnce} from 'react-use';\n\nfunction Level(props) {\n  const [data, setData] = useState(props.data);\n  const {t} = useTranslation();\n\n  useEffectOnce(() => {\n    setData({\n      active: +props.data.active,\n      confirmed: +props.data.confirmed,\n      recovered: +props.data.recovered,\n      deaths: +props.data.deaths,\n      deltaconfirmed: +props.data.deltaconfirmed,\n      deltadeaths: +props.data.deltadeaths,\n      deltarecovered: +props.data.deltarecovered,\n    });\n  });\n\n  return (\n    <div className=\"Level\">\n      <div\n        className=\"level-item is-cherry fadeInUp\"\n        style={{animationDelay: '1s'}}\n      >\n        <h5>{t('Confirmed')}</h5>\n        <h4>\n          [\n          {isNaN(data.deltaconfirmed)\n            ? ''\n            : data.deltaconfirmed > 0\n            ? '+' + formatNumber(data.deltaconfirmed)\n            : '+0'}\n          ]\n        </h4>\n        <h1>{formatNumber(data.confirmed)} </h1>\n      </div>\n\n      <div\n        className=\"level-item is-blue fadeInUp\"\n        style={{animationDelay: '1.1s'}}\n      >\n        <h5 className=\"heading\">{t('Active')}</h5>\n        <h4>&nbsp;</h4>\n        <h1 className=\"title has-text-info\">{formatNumber(data.active)}</h1>\n      </div>\n\n      <div\n        className=\"level-item is-green fadeInUp\"\n        style={{animationDelay: '1.2s'}}\n      >\n        <h5 className=\"heading\">{t('Recovered')}</h5>\n        <h4>\n          [\n          {isNaN(data.deltarecovered)\n            ? ''\n            : data.deltarecovered > 0\n            ? '+' + formatNumber(data.deltarecovered)\n            : '+0'}\n          ]\n        </h4>\n        <h1 className=\"title has-text-success\">\n          {formatNumber(data.recovered)}{' '}\n        </h1>\n      </div>\n\n      <div\n        className=\"level-item is-gray fadeInUp\"\n        style={{animationDelay: '1.3s'}}\n      >\n        <h5 className=\"heading\">{t('Deceased')}</h5>\n        <h4>\n          [\n          {isNaN(data.deltadeaths)\n            ? ''\n            : data.deltadeaths > 0\n            ? '+' + formatNumber(data.deltadeaths)\n            : '+0'}\n          ]\n        </h4>\n        <h1 className=\"title has-text-grey\">{formatNumber(data.deaths)}</h1>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(Level);\n","import * as d3 from 'd3';\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\n\nfunction Minigraph({timeseries}) {\n  const [timeSeriesData, setTimeSeriesData] = useState([]);\n  const svgRef1 = useRef();\n  const svgRef2 = useRef();\n  const svgRef3 = useRef();\n  const svgRef4 = useRef();\n\n  useEffect(() => {\n    setTimeSeriesData(timeseries.slice(timeseries.length - 20));\n  }, [timeseries]);\n\n  const graphData = useCallback((data) => {\n    if (data.length <= 1) return 0;\n\n    const margin = {top: 10, right: 5, bottom: 20, left: 5};\n    const chartRight = 100 - margin.right;\n    const chartBottom = 100 - margin.bottom;\n\n    const svg1 = d3.select(svgRef1.current);\n    const svg2 = d3.select(svgRef2.current);\n    const svg3 = d3.select(svgRef3.current);\n    const svg4 = d3.select(svgRef4.current);\n\n    data.forEach((d) => {\n      d['dailyactive'] = d.dailyconfirmed - d.dailyrecovered - d.dailydeceased;\n    });\n\n    const xScale = d3\n      .scaleTime()\n      .domain(d3.extent(data, (d) => d.date))\n      .range([margin.left, chartRight]);\n\n    const svgArray = [svg1, svg2, svg3, svg4];\n    const dataTypes = [\n      'dailyconfirmed',\n      'dailyactive',\n      'dailyrecovered',\n      'dailydeceased',\n    ];\n    const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d'];\n\n    const dailyMin = d3.min(data, (d) => d.dailyactive);\n    const dailyMax = d3.max(data, (d) =>\n      Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\n    );\n    const domainMinMax = Math.max(-dailyMin, dailyMax);\n\n    const yScale = d3\n      .scaleLinear()\n      .domain([-domainMinMax, domainMinMax])\n      .range([chartBottom, margin.top]);\n\n    svgArray.forEach((svg, i) => {\n      const type = dataTypes[i];\n      const color = colors[i];\n\n      const path = svg\n        .append('path')\n        .datum(data)\n        .attr('fill', 'none')\n        .attr('stroke', color + '99')\n        .attr('stroke-width', 2.5)\n        .attr('cursor', 'pointer')\n        .attr(\n          'd',\n          d3\n            .line()\n            .x((d) => xScale(d.date))\n            .y((d) => yScale(d[type]))\n            .curve(d3.curveCardinal)\n        );\n\n      const totalLength = path.node().getTotalLength();\n      path\n        .attr('stroke-dasharray', totalLength + ' ' + totalLength)\n        .attr('stroke-dashoffset', totalLength)\n        .transition()\n        .delay(500)\n        .duration(2500)\n        .attr('stroke-dashoffset', 0);\n\n      svg\n        .selectAll('.dot')\n        .data(data.slice(data.length - 1))\n        .enter()\n        .append('circle')\n        .attr('fill', color)\n        .attr('stroke', color)\n        .attr('r', 2)\n        .attr('cursor', 'pointer')\n        .attr('cx', (d) => xScale(d.date))\n        .attr('cy', (d) => yScale(d[type]))\n        .on('mouseover', (d) => {\n          d3.select(d3.event.target).attr('r', '5');\n        })\n        .on('mouseout', (d) => {\n          d3.select(d3.event.target).attr('r', '2');\n        })\n        .style('opacity', 0)\n        .transition()\n        .delay(500)\n        .duration(2500)\n        .style('opacity', 1);\n    });\n  }, []);\n\n  useEffect(() => {\n    graphData(timeSeriesData);\n  }, [timeSeriesData, graphData]);\n\n  return (\n    <div className=\"Minigraph\">\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '1.4s'}}>\n        <svg\n          ref={svgRef1}\n          width=\"100\"\n          height=\"75\"\n          viewBox=\"0 0 100 75\"\n          preserveAspectRatio=\"xMidYMid meet\"\n        />\n      </div>\n\n      <div\n        className=\"svg-parent is-blue fadeInUp\"\n        style={{animationDelay: '1.5s'}}\n      >\n        <svg\n          ref={svgRef2}\n          width=\"100\"\n          height=\"75\"\n          viewBox=\"0 0 100 75\"\n          preserveAspectRatio=\"xMidYMid meet\"\n        />\n      </div>\n\n      <div\n        className=\"svg-parent is-green fadeInUp\"\n        style={{animationDelay: '1.6s'}}\n      >\n        <svg\n          ref={svgRef3}\n          width=\"100\"\n          height=\"75\"\n          viewBox=\"0 0 100 75\"\n          preserveAspectRatio=\"xMidYMid meet\"\n        />\n      </div>\n\n      <div\n        className=\"svg-parent is-gray fadeInUp\"\n        style={{animationDelay: '1.7s'}}\n      >\n        <svg\n          ref={svgRef4}\n          width=\"100\"\n          height=\"75\"\n          viewBox=\"0 0 100 75\"\n          preserveAspectRatio=\"xMidYMid meet\"\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(Minigraph);\n","import {MAP_STATISTICS} from '../constants';\nimport {capitalizeAll, formatNumber} from '../utils/commonfunctions';\nimport {useResizeObserver} from '../utils/hooks';\n\nimport * as d3 from 'd3';\nimport React, {useEffect, useRef} from 'react';\n\nfunction MapLegend({mapScale, statistic, mapStatistic, mapOption}) {\n  const svgRef = useRef(null);\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  useEffect(() => {\n    const svg = d3.select(svgRef.current);\n    const {width, height} =\n      dimensions || wrapperRef.current.getBoundingClientRect();\n\n    if (mapStatistic === MAP_STATISTICS.ZONE) {\n      svg.call(() =>\n        legend({\n          svg: svg,\n          color: mapScale,\n          width: width,\n          height: height,\n          tickValues: [],\n          marginLeft: 2,\n          marginRight: 20,\n          ordinalWeights: Object.values(statistic),\n        })\n      );\n    } else if (mapStatistic === MAP_STATISTICS.HOTSPOTS) {\n      const t = svg.transition().duration(500);\n      svg\n        .select('.ramp')\n        .transition(t)\n        .attr('opacity', 0)\n        .attr('xlink:href', null);\n\n      svg\n        .select('.bars')\n        .selectAll('rect')\n        .transition(t)\n        .attr('opacity', 0)\n        .remove();\n      svg.selectAll('.axis > *').remove();\n\n      const domainMax = mapScale.domain()[1];\n\n      const legend = svg\n        .select('.circles')\n        .attr('transform', `translate(48,40)`)\n        .attr('text-anchor', 'middle');\n\n      legend\n        .selectAll('circle')\n        .data([domainMax / 10, (domainMax * 2) / 5, domainMax])\n        .join('circle')\n        .attr('fill', 'none')\n        .attr('stroke', '#ccc')\n        .transition(t)\n        .attr('cy', (d) => -mapScale(d))\n        .attr('r', mapScale);\n\n      const yScale = mapScale.copy().range([0, -2 * mapScale(domainMax)]);\n\n      svg\n        .select('.circleAxis')\n        .attr('transform', `translate(48,50)`)\n        .transition(t)\n        .call(\n          d3\n            .axisRight(yScale)\n            .tickSize(0)\n            .tickPadding(0)\n            .tickValues([domainMax / 10, (domainMax * 2) / 5, domainMax])\n            .tickFormat(d3.format('0~s'))\n        )\n        .selectAll('.tick text')\n        .style('text-anchor', 'middle');\n\n      svg.select('.circleAxis').call((g) => g.select('.domain').remove());\n    } else {\n      svg.call(() =>\n        legend({\n          svg: svg,\n          color: mapScale,\n          title:\n            capitalizeAll(mapOption) +\n            (mapStatistic === MAP_STATISTICS.PER_MILLION\n              ? ' cases per million'\n              : ' cases'),\n          width: width,\n          height: height,\n          ticks: 5,\n          tickFormat: function (d, i, n) {\n            if (mapStatistic === MAP_STATISTICS.TOTAL && !Number.isInteger(d))\n              return;\n            if (i === n.length - 1) return formatNumber(d) + '+';\n            return formatNumber(d);\n          },\n          marginLeft: 2,\n          marginRight: 20,\n        })\n      );\n    }\n    svg.attr('class', mapStatistic === MAP_STATISTICS.ZONE ? 'zone' : '');\n  });\n\n  return (\n    <div\n      className=\"svg-parent maplegend fadeInUp\"\n      style={{animationDelay: '2.5s', height: 50}}\n      ref={wrapperRef}\n    >\n      <svg id=\"legend\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\n        <image className=\"ramp\" />\n        <g className=\"bars\"></g>\n        <g className=\"circles\"></g>\n        <g className=\"circleAxis\"></g>\n        <g className=\"axis\">\n          <text className=\"axistext\" />\n        </g>\n      </svg>\n      <canvas\n        className=\"color-scale\"\n        style={{position: 'absolute', height: 0}}\n      />\n    </div>\n  );\n}\n\nexport default MapLegend;\n\nfunction legend({\n  svg,\n  color,\n  title,\n  tickSize = 6,\n  width = 320,\n  height = 44 + tickSize,\n  marginTop = 18,\n  marginRight = 0,\n  marginBottom = 16 + tickSize,\n  marginLeft = 0,\n  ticks = width / 64,\n  tickFormat,\n  tickValues,\n  ordinalWeights,\n} = {}) {\n  svg.selectAll('.circles > *').remove();\n  svg.selectAll('.circleAxis > *').remove();\n  const t = svg.transition().duration(500);\n\n  let tickAdjust = (g) => {\n    const ticks = g.selectAll('.tick line');\n    ticks.attr('y1', marginTop + marginBottom - height);\n    // d3.select(ticks.nodes()[ticks.size() - 1]).remove();\n  };\n  let x;\n\n  // Continuous\n  if (color.interpolate) {\n    const n = Math.min(color.domain().length, color.range().length);\n\n    x = color\n      .copy()\n      .rangeRound(\n        d3.quantize(d3.interpolate(marginLeft, width - marginRight), n)\n      );\n\n    svg\n      .select('.ramp')\n      .attr('class', 'ramp')\n      .attr('x', marginLeft)\n      .attr('y', marginTop)\n      .attr('width', width - marginLeft - marginRight)\n      .attr('height', height - marginTop - marginBottom)\n      .attr('preserveAspectRatio', 'none')\n      .attr(\n        'xlink:href',\n        ramp(\n          color.copy().domain(d3.quantize(d3.interpolate(0, 1), n))\n        ).toDataURL()\n      );\n  }\n\n  // Sequential\n  else if (color.interpolator) {\n    svg\n      .select('.bars')\n      .selectAll('rect')\n      .transition(t)\n      .attr('opacity', 0)\n      .remove();\n\n    x = Object.assign(\n      color\n        .copy()\n        .interpolator(d3.interpolateRound(marginLeft, width - marginRight)),\n      {\n        range() {\n          return [marginLeft, width - marginRight];\n        },\n      }\n    );\n\n    svg\n      .select('.ramp')\n      .attr('class', 'ramp')\n      .attr('x', marginLeft)\n      .attr('y', marginTop)\n      .attr('width', width - marginLeft - marginRight)\n      .attr('height', height - marginTop - marginBottom)\n      .attr('preserveAspectRatio', 'none')\n      .attr('xlink:href', ramp(color.interpolator()).toDataURL())\n      .transition(t)\n      .attr('opacity', 1);\n\n    // scaleSequentialQuantile doesnt implement ticks or tickFormat.\n    if (!x.ticks) {\n      if (tickValues === undefined) {\n        const n = Math.round(ticks + 1);\n        tickValues = d3\n          .range(n)\n          .map((i) => d3.quantile(color.domain(), i / (n - 1)));\n      }\n      if (typeof tickFormat !== 'function') {\n        tickFormat = d3.format(tickFormat === undefined ? ',f' : tickFormat);\n      }\n    }\n  }\n\n  // Threshold\n  else if (color.invertExtent) {\n    const thresholds = color.thresholds\n      ? color.thresholds() // scaleQuantize\n      : color.quantiles\n      ? color.quantiles() // scaleQuantile\n      : color.domain(); // scaleThreshold\n\n    const thresholdFormat =\n      tickFormat === undefined\n        ? (d) => d\n        : typeof tickFormat === 'string'\n        ? d3.format(tickFormat)\n        : tickFormat;\n\n    x = d3\n      .scaleLinear()\n      .domain([-1, color.range().length - 1])\n      .rangeRound([marginLeft, width - marginRight]);\n\n    svg\n      .append('g')\n      .selectAll('rect')\n      .data(color.range())\n      .join('rect')\n      .attr('x', (d, i) => x(i - 1))\n      .attr('y', marginTop)\n      .attr('width', (d, i) => x(i) - x(i - 1))\n      .attr('height', height - marginTop - marginBottom)\n      .attr('fill', (d) => d);\n\n    tickValues = d3.range(-1, thresholds.length);\n    tickFormat = (i) => {\n      if (i === -1) return thresholdFormat(1);\n      else if (i === thresholds.length - 1) return;\n      else if (i === thresholds.length - 2)\n        return thresholdFormat(thresholds[i] + '+', i);\n      return thresholdFormat(thresholds[i], i);\n    };\n  }\n\n  // Ordinal\n  else {\n    svg\n      .select('.ramp')\n      .transition(t)\n      .attr('opacity', 0)\n      .attr('xlink:href', null);\n    if (!ordinalWeights) {\n      x = d3\n        .scaleBand()\n        .domain(color.domain())\n        .rangeRound([marginLeft, width - marginRight]);\n      svg\n        .selectAll('rect')\n        .data(color.domain())\n        .join('rect')\n        .attr('x', x)\n        .attr('y', marginTop)\n        .attr('width', Math.max(0, x.bandwidth() - 1))\n        .attr('height', height - marginTop - marginBottom)\n        .attr('fill', color);\n    } else {\n      const widthScale = d3\n        .scaleLinear()\n        .domain([0, ordinalWeights.reduce((a, b) => a + b)])\n        .rangeRound([0, width - marginLeft - marginRight]);\n\n      const xPos = ordinalWeights.map((w, i) =>\n        ordinalWeights\n          .slice(0, i)\n          .reduce((acc, w) => acc + widthScale(w), marginLeft)\n      );\n\n      x = d3.scaleOrdinal().domain(color.domain()).range(xPos);\n\n      svg\n        .select('.bars')\n        .selectAll('rect')\n        .data(color.domain())\n        .join((enter) =>\n          enter\n            .append('rect')\n            .attr('x', x)\n            .attr('width', (d, i) => widthScale(ordinalWeights[i]))\n        )\n        .attr('y', marginTop)\n        .attr('height', height - marginTop - marginBottom)\n        .attr('fill', color)\n        .transition(t)\n        .attr('x', x)\n        .attr('width', (d, i) => widthScale(ordinalWeights[i]))\n        .attr('opacity', 1);\n    }\n\n    tickAdjust = () => {};\n  }\n\n  svg\n    .select('.axis')\n    .attr('transform', `translate(0,${height - marginBottom})`)\n    .transition(t)\n    .attr('class', 'axis')\n    .call(\n      d3\n        .axisBottom(x)\n        .ticks(ticks, typeof tickFormat === 'string' ? tickFormat : undefined)\n        .tickFormat(typeof tickFormat === 'function' ? tickFormat : undefined)\n        .tickSize(tickSize)\n        .tickValues(tickValues)\n    )\n    .on('start', () => {\n      svg.call(tickAdjust).call((svg) => svg.select('.domain').remove());\n    })\n    .call((g) =>\n      g\n        .select('.axistext')\n        .attr('class', 'axistext')\n        .attr('x', marginLeft)\n        .attr('y', marginTop + marginBottom - height - 6)\n        .attr('fill', 'currentColor')\n        .attr('text-anchor', 'start')\n        .attr('font-weight', 'bold')\n        .text(title)\n    );\n\n  return svg.node();\n}\n\nfunction ramp(color, n = 256) {\n  // const canvas = document.createElement('canvas');\n  const canvas = d3.select('.color-scale').node();\n  const context = ((canvas.width = n), (canvas.height = 1), canvas).getContext(\n    '2d'\n  );\n  for (let i = 0; i < n; ++i) {\n    context.fillStyle = color(i / (n - 1));\n    context.fillRect(i, 0, 1, 1);\n  }\n  return canvas;\n}\n","import MapLegend from './maplegend';\n\nimport {MAP_META, MAP_STATISTICS, MAP_TYPES, MAP_VIEWS} from '../constants';\nimport {capitalizeAll} from '../utils/commonfunctions';\n\nimport * as d3 from 'd3';\nimport React, {useCallback, useEffect, useMemo, useRef} from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport useSWR from 'swr';\nimport * as topojson from 'topojson';\n\nconst colorInterpolator = (caseType, t) => {\n  switch (caseType) {\n    case 'confirmed':\n      return d3.interpolateReds(t * 0.85);\n    case 'active':\n      return d3.interpolateBlues(t * 0.85);\n    case 'recovered':\n      return d3.interpolateGreens(t * 0.85);\n    case 'deceased':\n      return d3.interpolateGreys(t * 0.85);\n    default:\n      return;\n  }\n};\n\nconst caseColor = (caseType, alpha = '') => {\n  switch (caseType) {\n    case 'confirmed':\n      return '#ff073a' + alpha;\n    case 'active':\n      return '#007bff' + alpha;\n    case 'recovered':\n      return '#28a745' + alpha;\n    case 'deceased':\n      return '#6c757d' + alpha;\n    default:\n      return;\n  }\n};\n\nfunction ChoroplethMap({\n  statistic,\n  mapData,\n  currentMap,\n  changeMap,\n  regionHighlighted,\n  setRegionHighlighted,\n  mapOption,\n  isCountryLoaded,\n}) {\n  const {t} = useTranslation();\n  const svgRef = useRef(null);\n\n  const mapMeta = MAP_META[currentMap.name];\n  const geoDataResponse = useSWR(mapMeta.geoDataFile, async (file) => {\n    return await d3.json(file);\n  });\n\n  const mapScale = useMemo(() => {\n    if (currentMap.stat === MAP_STATISTICS.ZONE) {\n      return d3.scaleOrdinal(\n        ['Red', 'Orange', 'Green'],\n        ['#d73027', '#fee08b', '#66bd63']\n      );\n    } else if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\n      const {width} = svgRef.current.getBoundingClientRect();\n      return d3\n        .scaleSqrt([0, statistic[mapOption].max], [0, width / 10])\n        .clamp(true)\n        .nice(3);\n    } else {\n      return d3\n        .scaleSequential([0, Math.max(1, statistic[mapOption].max)], (t) =>\n          colorInterpolator(mapOption, t)\n        )\n        .clamp(true);\n    }\n  }, [currentMap.stat, statistic, mapOption]);\n\n  useEffect(() => {\n    if (!geoDataResponse.data) return;\n    const geoData = geoDataResponse.data;\n\n    const topology = topojson.feature(\n      geoData,\n      geoData.objects[mapMeta.graphObjectStates || mapMeta.graphObjectDistricts]\n    );\n\n    const svg = d3.select(svgRef.current);\n\n    if (!svg.attr('viewBox')) {\n      const {\n        width: widthDefault,\n        height: heightDefault,\n      } = svgRef.current.getBoundingClientRect();\n      const projection = isCountryLoaded\n        ? d3.geoMercator().fitWidth(widthDefault, topology)\n        : d3.geoMercator().fitSize([widthDefault, heightDefault], topology);\n      const path = d3.geoPath(projection);\n      const bBox = path.bounds(topology);\n      const [width, height] = [+bBox[1][0], bBox[1][1]];\n      svg.attr('viewBox', `0 0 ${width} ${height}`);\n    }\n    const bBox = svg.attr('viewBox').split(' ');\n    const [width, height] = [+bBox[2], +bBox[3]];\n\n    const projection = d3.geoMercator().fitSize([width, height], topology);\n    const path = d3.geoPath(projection);\n\n    // Add id to each feature\n    let features =\n      currentMap.stat !== MAP_STATISTICS.HOTSPOTS\n        ? currentMap.view === MAP_VIEWS.STATES\n          ? topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectStates]\n            ).features\n          : topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectDistricts]\n            ).features\n        : [\n            ...topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectStates]\n            ).features,\n            ...topojson.feature(\n              geoData,\n              geoData.objects[mapMeta.graphObjectDistricts]\n            ).features,\n          ];\n\n    features = features.map((f) => {\n      const district = f.properties.district;\n      const state = f.properties.st_nm;\n      const obj = Object.assign({}, f);\n      obj.id = `${currentMap.name}-${state}${district ? '-' + district : ''}`;\n      return obj;\n    });\n\n    /* Draw map */\n    const t = d3.transition().duration(500);\n    let onceTouchedRegion = null;\n    const regionSelection = svg\n      .select('.regions')\n      .selectAll('path')\n      .data(\n        currentMap.stat !== MAP_STATISTICS.HOTSPOTS ? features : [],\n        (d) => d.id\n      )\n      .join((enter) => {\n        const sel = enter\n          .append('path')\n          .attr('d', path)\n          .attr('stroke-width', 2)\n          .attr('stroke-opacity', 0)\n          .style('cursor', 'pointer')\n          .on('mouseenter', (d) => {\n            const region = {state: d.properties.st_nm};\n            if (d.properties.district) region.district = d.properties.district;\n            setRegionHighlighted(region);\n          })\n          .on('mouseleave', (d) => {\n            if (onceTouchedRegion === d) onceTouchedRegion = null;\n          })\n          .on('touchstart', (d) => {\n            if (onceTouchedRegion === d) onceTouchedRegion = null;\n            else onceTouchedRegion = d;\n          })\n          .on('click', (d) => {\n            d3.event.stopPropagation();\n            if (onceTouchedRegion || mapMeta.mapType === MAP_TYPES.STATE)\n              return;\n            // Disable pointer events till the new map is rendered\n            svg.attr('pointer-events', 'none');\n            svg\n              .select('.regions')\n              .selectAll('path')\n              .attr('pointer-events', 'none');\n            // Switch map\n            changeMap(d.properties.st_nm);\n          });\n        sel.append('title');\n        return sel;\n      })\n      .attr('pointer-events', 'none');\n\n    regionSelection\n      .transition(t)\n      .attr('fill', (d) => {\n        let n;\n        if (currentMap.stat === MAP_STATISTICS.ZONE) {\n          const state = d.properties.st_nm;\n          const district = d.properties.district;\n          n =\n            mapData[state] && mapData[state][district]\n              ? mapData[state][district]\n              : 0;\n        } else {\n          const state = d.properties.st_nm;\n          const district = d.properties.district;\n          if (district)\n            n =\n              mapData[state] &&\n              mapData[state][district] &&\n              mapData[state][district][mapOption]\n                ? mapData[state][district][mapOption]\n                : 0;\n          else\n            n =\n              mapData[state] && mapData[state][mapOption]\n                ? mapData[state][mapOption]\n                : 0;\n        }\n        const color = n === 0 ? '#ffffff00' : mapScale(n);\n        return color;\n      })\n      .attr(\n        'stroke',\n        currentMap.stat === MAP_STATISTICS.ZONE\n          ? '#343a40'\n          : caseColor(mapOption)\n      )\n      .on('end', function () {\n        d3.select(this).attr('pointer-events', 'all');\n      });\n\n    regionSelection.select('title').text((d) => {\n      if (currentMap.stat === MAP_STATISTICS.TOTAL) {\n        const state = d.properties.st_nm;\n        const district = d.properties.district;\n        let n;\n        if (district)\n          n =\n            mapData[state] && mapData[state][district]\n              ? mapData[state][district][mapOption]\n              : 0;\n        else n = mapData[state] ? mapData[state][mapOption] : 0;\n        return (\n          Number(\n            parseFloat(\n              100 * (n / (statistic[mapOption].total || 0.001))\n            ).toFixed(2)\n          ).toString() +\n          '% from ' +\n          capitalizeAll(district ? district : state)\n        );\n      }\n    });\n\n    svg\n      .transition()\n      .duration(mapMeta.mapType === MAP_TYPES.STATE ? t.duration() / 2 : 0)\n      .on('end', () =>\n        svg.attr('class', currentMap.stat === MAP_STATISTICS.ZONE ? 'zone' : '')\n      );\n\n    /* ----------BUBBLE MAP----------*/\n    let circlesData = [];\n    if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\n      circlesData = features\n        .map((d) => {\n          const district = d.properties.district;\n          const state = d.properties.st_nm;\n          if (district) {\n            d.value =\n              mapData[state] && mapData[state][district]\n                ? mapData[state][district][mapOption]\n                : 0;\n          } else {\n            d.value =\n              mapData[state] && mapData[state].Unknown\n                ? mapData[state].Unknown[mapOption]\n                : 0;\n          }\n          return d;\n        })\n        .sort((a, b) => b.value - a.value);\n    }\n\n    svg\n      .select('.circles')\n      .selectAll('circle')\n      .data(circlesData, (d) => d.id)\n      .join((enter) =>\n        enter\n          .append('circle')\n          .attr('transform', (d) => `translate(${path.centroid(d)})`)\n          .attr('fill-opacity', 0.5)\n          .style('cursor', 'pointer')\n          .attr('pointer-events', 'all')\n          .on('mouseenter', (d) => {\n            const region = {\n              state: d.properties.st_nm,\n              district: d.properties.district || 'Unknown',\n            };\n            setRegionHighlighted(region);\n          })\n          .on('click', () => {\n            d3.event.stopPropagation();\n          })\n      )\n      .transition(t)\n      .attr('fill', caseColor(mapOption, '70'))\n      .attr('stroke', caseColor(mapOption, '70'))\n      .attr('r', (d) => mapScale(d.value));\n    /* ------------------------------*/\n\n    let meshStates = [];\n    if (mapMeta.mapType === MAP_TYPES.COUNTRY) {\n      meshStates = [\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectStates]),\n      ];\n      meshStates[0].id = mapMeta.graphObjectStates;\n    }\n    let meshDistricts = [];\n    if (currentMap.view === MAP_VIEWS.DISTRICTS) {\n      // Add id to mesh\n      meshDistricts = [\n        topojson.mesh(geoData, geoData.objects[mapMeta.graphObjectDistricts]),\n      ];\n      meshDistricts[0].id = mapMeta.graphObjectDistricts;\n    }\n\n    svg\n      .select(\n        currentMap.view === MAP_VIEWS.STATES\n          ? '.state-borders'\n          : '.district-borders'\n      )\n      .attr('fill', 'none')\n      .attr('stroke-width', function () {\n        return mapMeta.mapType === MAP_TYPES.COUNTRY &&\n          currentMap.view === MAP_VIEWS.DISTRICTS\n          ? 0\n          : width / 250;\n      })\n      .selectAll('path')\n      .data(\n        currentMap.view === MAP_VIEWS.STATES ? meshStates : meshDistricts,\n        (d) => d.id\n      )\n      .join((enter) => enter.append('path').attr('d', path))\n      .transition(t)\n      .attr('stroke', () => {\n        if (currentMap.stat === MAP_STATISTICS.ZONE) {\n          return '#00000060';\n        } else {\n          return caseColor(mapOption, '30');\n        }\n      });\n\n    svg\n      .select(\n        currentMap.view === MAP_VIEWS.STATES\n          ? '.district-borders'\n          : '.state-borders'\n      )\n      .selectAll('path')\n      .data(\n        currentMap.view === MAP_VIEWS.STATES ? meshDistricts : meshStates,\n        (d) => d.id\n      )\n      .join((enter) =>\n        enter\n          .append('path')\n          .attr('d', path)\n          .attr('fill', 'none')\n          .attr('stroke-width', width / 250)\n      )\n      .transition(t)\n      .attr('stroke', '#343a4099');\n\n    // Reset on tapping outside map\n    svg.attr('pointer-events', 'auto').on('click', () => {\n      if (mapMeta.mapType !== MAP_TYPES.STATE) {\n        setRegionHighlighted({\n          state: 'Total',\n        });\n      }\n    });\n  }, [\n    geoDataResponse.data,\n    mapMeta,\n    currentMap,\n    setRegionHighlighted,\n    changeMap,\n    isCountryLoaded,\n    mapScale,\n    statistic,\n    mapData,\n    mapOption,\n  ]);\n\n  const highlightRegionInMap = useCallback(\n    (state, district) => {\n      const svg = d3.select(svgRef.current);\n      if (currentMap.stat === MAP_STATISTICS.HOTSPOTS) {\n        svg\n          .select('.circles')\n          .selectAll('circle')\n          .attr('fill-opacity', (d) => {\n            const highlighted =\n              district &&\n              state === d.properties.st_nm &&\n              (district === d.properties.district ||\n                (district === 'Unknown' && !d.properties.district));\n            return highlighted ? 1 : 0.5;\n          });\n      } else {\n        svg\n          .select('.regions')\n          .selectAll('path')\n          .each(function (d) {\n            const highlighted =\n              district === d.properties?.district &&\n              state === d.properties.st_nm;\n            if (highlighted) this.parentNode.appendChild(this);\n            d3.select(this).attr('stroke-opacity', highlighted ? 1 : 0);\n          });\n      }\n    },\n    [currentMap.stat]\n  );\n\n  useEffect(() => {\n    if (!geoDataResponse.data) return;\n    highlightRegionInMap(regionHighlighted.state, regionHighlighted.district);\n  }, [\n    geoDataResponse.data,\n    highlightRegionInMap,\n    regionHighlighted.state,\n    regionHighlighted.district,\n    mapOption,\n  ]);\n\n  return (\n    <React.Fragment>\n      <div className=\"svg-parent fadeInUp\" style={{animationDelay: '2.5s'}}>\n        <svg id=\"chart\" preserveAspectRatio=\"xMidYMid meet\" ref={svgRef}>\n          <g className=\"regions\" />\n          <g className=\"state-borders\" />\n          {currentMap.view === MAP_VIEWS.DISTRICTS && (\n            <g className=\"district-borders\" />\n          )}\n          {currentMap.stat === MAP_STATISTICS.HOTSPOTS && (\n            <g className=\"circles\" />\n          )}\n        </svg>\n        {mapMeta.mapType === MAP_TYPES.STATE &&\n        mapData[currentMap.name]?.Unknown &&\n        mapData[currentMap.name]?.Unknown[mapOption] ? (\n          <div className=\"disclaimer\">\n            <Icon.AlertCircle />\n            {t('District-wise {{mapOption}} numbers are under reconciliation', {\n              mapOption: t(mapOption),\n            })}\n          </div>\n        ) : (\n          ''\n        )}\n      </div>\n\n      {mapScale && (\n        <MapLegend\n          mapScale={mapScale}\n          statistic={statistic}\n          mapStatistic={currentMap.stat}\n          mapOption={mapOption}\n        />\n      )}\n\n      <svg style={{position: 'absolute', height: 0}}>\n        <defs>\n          <filter id=\"balance-color\" colorInterpolationFilters=\"sRGB\">\n            <feColorMatrix\n              type=\"matrix\"\n              values=\"0.91372549  0           0            0  0.08627451\n                      0           0.91372549  0            0  0.08627451\n                      0           0           0.854901961  0  0.145098039\n                      0           0           0            1  0\"\n            />\n          </filter>\n        </defs>\n      </svg>\n    </React.Fragment>\n  );\n}\n\nexport default ChoroplethMap;\n","import ChoroplethMap from './choropleth';\nimport {testedToolTip} from './tooltips';\n\nimport {\n  MAP_META,\n  MAP_STATISTICS,\n  MAP_TYPES,\n  MAP_VIEWS,\n  STATE_CODES_REVERSE,\n  STATE_POPULATIONS,\n} from '../constants';\nimport {\n  formatDate,\n  formatNumber,\n  formatDayMonth,\n  formatLastUpdated,\n} from '../utils/commonfunctions';\n\nimport {parse} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport React, {useState, useEffect, useMemo, useCallback} from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {Link} from 'react-router-dom';\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  }\n  if (!equal(prevProps.mapOption, currProps.mapOption)) {\n    return false;\n  }\n  if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  }\n  return true;\n};\n\nconst getRegionFromState = (state) => {\n  if (!state) return;\n  const region = {...state};\n  return region;\n};\n\nconst getRegionFromDistrict = (districtData, name) => {\n  if (!districtData) return;\n  const region = {...districtData};\n  return region;\n};\n\nfunction MapExplorer({\n  mapName,\n  states,\n  districts,\n  zones,\n  stateTestData,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  mapOption,\n  setMapOption,\n  isCountryLoaded = true,\n}) {\n  const {t} = useTranslation();\n  const [currentMap, setCurrentMap] = useState({\n    name: mapName,\n    stat: MAP_STATISTICS.TOTAL,\n    view:\n      MAP_META[mapName].mapType === MAP_TYPES.COUNTRY\n        ? MAP_VIEWS.STATES\n        : MAP_VIEWS.DISTRICTS,\n  });\n  const currentMapMeta = MAP_META[currentMap.name];\n\n  const [statistic, currentMapData] = useMemo(() => {\n    let currentMapData = {};\n    let statistic = {};\n    if (currentMap.stat === MAP_STATISTICS.ZONE) {\n      const dataTypes = ['Red', 'Orange', 'Green'];\n      statistic = dataTypes.reduce((acc, dtype) => {\n        acc[dtype] = 0;\n        return acc;\n      }, {});\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY) {\n        currentMapData = Object.keys(zones).reduce((acc1, state) => {\n          acc1[state] = Object.keys(zones[state]).reduce((acc2, district) => {\n            const zone = zones[state][district].zone;\n            if (zone) {\n              acc2[district] = zone;\n              statistic[zone] += 1;\n            }\n            return acc2;\n          }, {});\n          return acc1;\n        }, {});\n      } else if (currentMapMeta.mapType === MAP_TYPES.STATE) {\n        const state = currentMap.name;\n        currentMapData[state] = Object.keys(zones[state]).reduce(\n          (acc, district) => {\n            const zone = zones[state][district].zone;\n            if (zone) {\n              acc[district] = zone;\n              statistic[zone] += 1;\n            }\n            return acc;\n          },\n          {}\n        );\n      }\n    } else {\n      const dataTypes = ['confirmed', 'active', 'recovered', 'deceased'];\n      statistic = dataTypes.reduce((acc, dtype) => {\n        acc[dtype] = {total: 0, max: 0};\n        return acc;\n      }, {});\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY) {\n        if (currentMap.view === MAP_VIEWS.STATES) {\n          currentMapData = states.reduce((acc, state) => {\n            acc[state.state] = {};\n            dataTypes.forEach((dtype) => {\n              let typeCount =\n                parseInt(state[dtype !== 'deceased' ? dtype : 'deaths']) || 0;\n              if (currentMap.stat === MAP_STATISTICS.PER_MILLION)\n                typeCount = (1e6 * typeCount) / STATE_POPULATIONS[state.state];\n              if (state.state !== 'Total') {\n                statistic[dtype].total += typeCount;\n                if (typeCount > statistic[dtype].max) {\n                  statistic[dtype].max = typeCount;\n                }\n              }\n              acc[state.state][dtype] = typeCount;\n            });\n            return acc;\n          }, {});\n        } else {\n          currentMapData = Object.keys(districts).reduce((acc1, state) => {\n            const districtWiseData = (districts[state] || {districtData: {}})\n              .districtData;\n            acc1[state] = Object.keys(districtWiseData).reduce(\n              (acc2, district) => {\n                acc2[district] = {};\n                dataTypes.forEach((dtype) => {\n                  const typeCount = parseInt(districtWiseData[district][dtype]);\n                  statistic[dtype].total += typeCount;\n                  if (typeCount > statistic[dtype].max) {\n                    statistic[dtype].max = typeCount;\n                  }\n                  acc2[district][dtype] = typeCount;\n                });\n                return acc2;\n              },\n              {}\n            );\n            return acc1;\n          }, {});\n        }\n      } else if (currentMapMeta.mapType === MAP_TYPES.STATE) {\n        const districtWiseData = (\n          districts[currentMap.name] || {districtData: {}}\n        ).districtData;\n        currentMapData[currentMap.name] = Object.keys(districtWiseData).reduce(\n          (acc, district) => {\n            acc[district] = {};\n            dataTypes.forEach((dtype) => {\n              const typeCount = parseInt(districtWiseData[district][dtype]);\n              statistic[dtype].total += typeCount;\n              if (typeCount > statistic[dtype].max) {\n                statistic[dtype].max = typeCount;\n              }\n              acc[district][dtype] = typeCount;\n            });\n            return acc;\n          },\n          {}\n        );\n        currentMapData[currentMap.name].Total = {};\n        const stateData = states.find(\n          (state) => currentMap.name === state.state\n        );\n        dataTypes.forEach((dtype) => {\n          currentMapData[currentMap.name].Total[dtype] =\n            parseInt(stateData[dtype !== 'deceased' ? dtype : 'deaths']) || 0;\n        });\n      }\n    }\n    return [statistic, currentMapData];\n  }, [currentMap, currentMapMeta.mapType, districts, zones, states]);\n\n  const [hoveredRegion, panelRegion] = useMemo(() => {\n    if (!regionHighlighted.district) {\n      const state = getRegionFromState(\n        states.find((state) => regionHighlighted.state === state.state)\n      );\n      return [state, state];\n    } else {\n      const stateDistrictObj = districts[regionHighlighted.state] || {\n        districtData: {},\n      };\n      const districtData = stateDistrictObj.districtData[\n        regionHighlighted.district\n      ] || {\n        confirmed: 0,\n        active: 0,\n        recovered: 0,\n        deaths: 0,\n      };\n      const district = getRegionFromDistrict(\n        districtData,\n        regionHighlighted.district\n      );\n      let state = getRegionFromState(\n        states.find((state) => state.state === regionHighlighted.state)\n      );\n      district.district = regionHighlighted.district;\n      district.state = state.state;\n      if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n        state = states.find((state) => state.state === 'Total');\n      return [district, state];\n    }\n  }, [\n    states,\n    districts,\n    currentMapMeta.mapType,\n    regionHighlighted.state,\n    regionHighlighted.district,\n  ]);\n\n  useEffect(() => {\n    if (regionHighlighted.district) {\n      if (\n        currentMap.name !== regionHighlighted.state &&\n        !(\n          currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\n          currentMap.view === MAP_VIEWS.DISTRICTS\n        )\n      ) {\n        const state = regionHighlighted.state;\n        const newMapMeta = MAP_META[state];\n        if (!newMapMeta) {\n          return;\n        }\n        setCurrentMap({\n          name: state,\n          view: MAP_VIEWS.DISTRICTS,\n          stat:\n            currentMap.stat === MAP_STATISTICS.PER_MILLION\n              ? MAP_STATISTICS.TOTAL\n              : currentMap.stat,\n        });\n      }\n    } else if (isCountryLoaded && currentMapMeta.mapType === MAP_TYPES.STATE) {\n      setCurrentMap({\n        name: 'India',\n        view:\n          currentMap.stat === MAP_STATISTICS.ZONE\n            ? MAP_VIEWS.DISTRICTS\n            : MAP_VIEWS.STATES,\n        stat: currentMap.stat,\n      });\n    }\n  }, [\n    isCountryLoaded,\n    regionHighlighted.state,\n    regionHighlighted.district,\n    currentMap,\n    currentMapMeta.mapType,\n  ]);\n\n  const switchMapToState = useCallback(\n    (state) => {\n      const newMapMeta = MAP_META[state];\n      if (!newMapMeta) {\n        return;\n      }\n      if (newMapMeta.mapType === MAP_TYPES.STATE) {\n        const {districtData} = districts[state] || {\n          districtData: {},\n        };\n        const topDistrict = Object.keys(districtData)\n          .filter((state) => state !== 'Unknown')\n          .sort((a, b) => {\n            return districtData[b].confirmed - districtData[a].confirmed;\n          })[0];\n        ReactDOM.unstable_batchedUpdates(() => {\n          setRegionHighlighted({\n            district: topDistrict,\n            state: state,\n          });\n          setCurrentMap({\n            name: state,\n            view: MAP_VIEWS.DISTRICTS,\n            stat:\n              currentMap.stat === MAP_STATISTICS.PER_MILLION\n                ? MAP_STATISTICS.TOTAL\n                : currentMap.stat,\n          });\n        });\n      } else {\n        ReactDOM.unstable_batchedUpdates(() => {\n          setCurrentMap({\n            name: 'India',\n            view:\n              currentMap.stat === MAP_STATISTICS.ZONE\n                ? MAP_VIEWS.DISTRICTS\n                : MAP_VIEWS.STATES,\n            stat: currentMap.stat,\n          });\n          setRegionHighlighted({\n            state: 'Total',\n          });\n        });\n      }\n    },\n    [currentMap.stat, districts, setRegionHighlighted]\n  );\n\n  const testObj = stateTestData[panelRegion.state];\n\n  let hoveredRegionCount;\n  let hoveredRegionZone;\n  if (currentMap.stat !== MAP_STATISTICS.ZONE) {\n    const data =\n      hoveredRegion.district && currentMapData[hoveredRegion.state]\n        ? currentMapData[hoveredRegion.state][hoveredRegion.district]\n        : hoveredRegion.state !== currentMap.name\n        ? currentMapData[hoveredRegion.state]\n        : currentMapData[hoveredRegion.state].Total;\n    hoveredRegionCount = data\n      ? currentMap.stat === MAP_STATISTICS.PER_MILLION\n        ? Number(parseFloat(data[mapOption]).toFixed(2))\n        : data[mapOption]\n      : 0;\n  } else {\n    hoveredRegionZone =\n      zones[hoveredRegion.state] &&\n      zones[hoveredRegion.state][hoveredRegion.district]\n        ? zones[hoveredRegion.state][hoveredRegion.district].zone\n        : '';\n  }\n\n  return (\n    <div\n      className={`MapExplorer fadeInUp ${\n        anchor === 'mapexplorer' ? 'stickied' : ''\n      }`}\n      style={{\n        animationDelay: '1.5s',\n        display: anchor === 'timeseries' ? 'none' : '',\n      }}\n    >\n      {window.innerWidth > 769 && (\n        <div\n          className={`anchor ${anchor === 'mapexplorer' ? 'stickied' : ''}`}\n          onClick={() => {\n            setAnchor(anchor === 'mapexplorer' ? null : 'mapexplorer');\n          }}\n        >\n          <Icon.Anchor />\n        </div>\n      )}\n      <div className=\"header\">\n        <h1>\n          {t(currentMap.name)} {t('Map')}\n        </h1>\n        <h6>\n          {t('{{action}} over a {{mapType}} for more details', {\n            action: t(window.innerWidth <= 769 ? 'Tap' : 'Hover'),\n            mapType: t(\n              currentMapMeta.mapType === MAP_TYPES.COUNTRY\n                ? 'state/UT'\n                : 'District'\n            ),\n          })}\n        </h6>\n      </div>\n\n      <div className=\"map-stats\">\n        <div\n          className={`stats fadeInUp ${\n            mapOption === 'confirmed' ? 'focused' : ''\n          }`}\n          style={{animationDelay: '2s'}}\n          onClick={() => setMapOption('confirmed')}\n        >\n          <h5>{window.innerWidth <= 769 ? t('Cnfmd') : t('Confirmed')}</h5>\n          <div className=\"stats-bottom\">\n            <h1>{formatNumber(panelRegion.confirmed)}</h1>\n            <h6>{`+${formatNumber(panelRegion.deltaconfirmed)}`}</h6>\n          </div>\n        </div>\n\n        <div\n          className={`stats is-blue fadeInUp ${\n            mapOption === 'active' ? 'focused' : ''\n          }`}\n          style={{animationDelay: '2.1s'}}\n          onClick={() => setMapOption('active')}\n        >\n          <h5>{window.innerWidth <= 769 ? t('Actv') : t('Active')}</h5>\n          <div className=\"stats-bottom\">\n            <h1>{formatNumber(panelRegion.active)}</h1>\n            <h6>{` `}</h6>\n          </div>\n        </div>\n\n        <div\n          className={`stats is-green fadeInUp ${\n            mapOption === 'recovered' ? 'focused' : ''\n          }`}\n          style={{animationDelay: '2.2s'}}\n          onClick={() => setMapOption('recovered')}\n        >\n          <h5>{window.innerWidth <= 769 ? t('Rcvrd') : t('Recovered')}</h5>\n          <div className=\"stats-bottom\">\n            <h1>{formatNumber(panelRegion.recovered)}</h1>\n            <h6>{`+${formatNumber(panelRegion.deltarecovered)}`}</h6>\n          </div>\n        </div>\n\n        <div\n          className={`stats is-gray fadeInUp ${\n            mapOption === 'deceased' ? 'focused' : ''\n          }`}\n          style={{animationDelay: '2.3s'}}\n          onClick={() => setMapOption('deceased')}\n        >\n          <h5>{window.innerWidth <= 769 ? t('Dcsd') : t('Deceased')}</h5>\n          <div className=\"stats-bottom\">\n            <h1>{formatNumber(panelRegion.deaths)}</h1>\n            <h6>{`+${formatNumber(panelRegion.deltadeaths)}`}</h6>\n          </div>\n        </div>\n\n        <div\n          className=\"stats is-purple tested fadeInUp\"\n          style={{animationDelay: '2.4s'}}\n        >\n          <h5>{t('Tested')}</h5>\n          <div className=\"stats-bottom\">\n            <h1>{formatNumber(testObj?.totaltested)}</h1>\n          </div>\n          <h6 className=\"timestamp\">\n            {!isNaN(parse(testObj?.updatedon, 'dd/MM/yyyy', new Date()))\n              ? t('As of {{date}}', {\n                  date: formatDayMonth(testObj?.updatedon),\n                })\n              : ''}\n          </h6>\n          {testObj?.totaltested?.length > 1 && (\n            <a href={testObj.source} target=\"_noblank\">\n              <Icon.Link />\n            </a>\n          )}\n          {panelRegion.state === 'Total' ? testedToolTip : ''}\n        </div>\n      </div>\n\n      <div className=\"meta fadeInUp\" style={{animationDelay: '2.4s'}}>\n        <h2\n          className={`${\n            currentMap.stat !== MAP_STATISTICS.ZONE\n              ? mapOption !== 'confirmed'\n                ? mapOption\n                : ''\n              : hoveredRegionZone\n          }`}\n        >\n          {hoveredRegion.district\n            ? t(hoveredRegion.district) +\n              (hoveredRegion.district === 'Unknown'\n                ? ` (${t(hoveredRegion.state)})`\n                : '')\n            : t(hoveredRegion.state)}\n        </h2>\n\n        {currentMapMeta.mapType !== MAP_TYPES.STATE &&\n          panelRegion.lastupdatedtime && (\n            <div className=\"last-update\">\n              <h6>{t('Last updated')}</h6>\n              <h3>\n                {isNaN(Date.parse(formatDate(panelRegion.lastupdatedtime)))\n                  ? ''\n                  : formatLastUpdated(panelRegion.lastupdatedtime) +\n                    ' ' +\n                    t('ago')}\n              </h3>\n            </div>\n          )}\n\n        {currentMapMeta.mapType === MAP_TYPES.STATE ? (\n          <Link to={`state/${STATE_CODES_REVERSE[panelRegion.state]}`}>\n            <div className=\"button state-page-button\">\n              <abbr>{t('Visit state page')}</abbr>\n              <Icon.ArrowRightCircle />\n            </div>\n          </Link>\n        ) : null}\n\n        {currentMap.stat !== MAP_STATISTICS.ZONE &&\n        (currentMapMeta.mapType === MAP_TYPES.STATE ||\n          (currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\n            currentMap.stat !== MAP_STATISTICS.TOTAL)) &&\n        (currentMap.stat !== MAP_STATISTICS.HOTSPOTS ||\n          hoveredRegion?.district) ? (\n          <h1\n            className={`district ${mapOption !== 'confirmed' ? mapOption : ''}`}\n          >\n            {hoveredRegionCount}\n            <br />\n            <span>\n              {t(mapOption)}{' '}\n              {currentMap.stat === MAP_STATISTICS.PER_MILLION\n                ? ` ${t('per million')}`\n                : ''}\n            </span>\n          </h1>\n        ) : null}\n\n        {currentMapMeta.mapType === MAP_TYPES.STATE ? (\n          <div\n            className=\"button back-button\"\n            onClick={() => switchMapToState('India')}\n          >\n            {t('Back')}\n          </div>\n        ) : null}\n\n        {currentMapMeta.mapType === MAP_TYPES.STATE &&\n        currentMapData.Unknown &&\n        currentMapData.Unknown[mapOption] > 0 ? (\n          <h4 className=\"unknown\">\n            {t('Districts unknown for')} {currentMapData.Unknown[mapOption]}{' '}\n            {t('people')}\n          </h4>\n        ) : null}\n      </div>\n\n      <div>\n        {mapOption && (\n          <ChoroplethMap\n            statistic={statistic}\n            currentMap={currentMap}\n            mapData={currentMapData}\n            regionHighlighted={regionHighlighted}\n            setRegionHighlighted={setRegionHighlighted}\n            changeMap={switchMapToState}\n            mapOption={mapOption}\n            isCountryLoaded={isCountryLoaded}\n          />\n        )}\n      </div>\n\n      <div className=\"tabs-map\">\n        <div\n          className={`tab ${\n            currentMap.stat === MAP_STATISTICS.TOTAL ? 'focused' : ''\n          }`}\n          onClick={() => {\n            setCurrentMap({\n              name: currentMap.name,\n              view:\n                currentMapMeta.mapType === MAP_TYPES.COUNTRY\n                  ? MAP_VIEWS.STATES\n                  : MAP_VIEWS.DISTRICTS,\n              stat: MAP_STATISTICS.TOTAL,\n            });\n            if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n              setRegionHighlighted({\n                state: regionHighlighted.state,\n              });\n          }}\n        >\n          <h4>{t('Total Cases')}</h4>\n        </div>\n        {isCountryLoaded && (\n          <div\n            className={`tab ${\n              currentMap.stat === MAP_STATISTICS.PER_MILLION ? 'focused' : ''\n            }`}\n            onClick={() => {\n              if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\n              setCurrentMap({\n                name: currentMap.name,\n                view: MAP_VIEWS.STATES,\n                stat: MAP_STATISTICS.PER_MILLION,\n              });\n              setRegionHighlighted({\n                state: regionHighlighted.state,\n              });\n            }}\n          >\n            <h4>\n              {t('Cases per million')}\n              <sup>&dagger;</sup>\n            </h4>\n          </div>\n        )}\n        {isCountryLoaded && (\n          <div\n            className={`tab ${\n              currentMap.stat === MAP_STATISTICS.HOTSPOTS ? 'focused' : ''\n            }`}\n            onClick={() => {\n              if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\n              setCurrentMap({\n                name: currentMap.name,\n                view: MAP_VIEWS.DISTRICTS,\n                stat: MAP_STATISTICS.HOTSPOTS,\n              });\n            }}\n          >\n            <h4>{t('Hotspots')}</h4>\n          </div>\n        )}\n        {/* <div\n          className={`tab ${\n            currentMap.stat === MAP_STATISTICS.ZONE ? 'focused' : ''\n          }`}\n          onClick={() => {\n            setCurrentMap({\n              name: currentMap.name,\n              view: MAP_VIEWS.DISTRICTS,\n              stat: MAP_STATISTICS.ZONE,\n            });\n            if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n              setRegionHighlighted({\n                state: 'Total',\n              });\n          }}\n        >\n          <h4>{t('Zones')}</h4>\n        </div>*/}\n      </div>\n\n      <h6 className=\"footnote table-fineprint\">\n        &dagger; {t('Based on 2019 population projection by NCP') + ' ('}\n        <a\n          href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\n          target=\"_noblank\"\n          style={{color: '#6c757d'}}\n        >\n          {t('source')}\n        </a>\n        )\n      </h6>\n    </div>\n  );\n}\n\nexport default React.memo(MapExplorer, isEqual);\n","import {testedToolTip} from './tooltips';\n\nimport {\n  sliceTimeseriesFromEnd,\n  formatNumber,\n  formatTimeseriesDate,\n  formatTimeseriesTickX,\n} from '../utils/commonfunctions';\nimport {useResizeObserver} from '../utils/hooks';\n\nimport * as d3 from 'd3';\nimport {addDays, subDays} from 'date-fns';\nimport equal from 'fast-deep-equal';\nimport React, {useState, useEffect, useRef, useCallback} from 'react';\nimport {useTranslation} from 'react-i18next';\n\nconst isEqual = (prevProps, currProps) => {\n  if (!currProps.isIntersecting) return true;\n  if (!prevProps.isIntersecting) return false;\n  if (!equal(currProps.chartType, prevProps.chartType)) {\n    return false;\n  }\n  if (!equal(currProps.mode, prevProps.mode)) {\n    return false;\n  }\n  if (!equal(currProps.logMode, prevProps.logMode)) {\n    return false;\n  }\n  if (!equal(currProps.stateCode, prevProps.stateCode)) {\n    return false;\n  }\n  return true;\n};\n\nfunction TimeSeries({timeseriesProp, chartType, mode, logMode, stateCode}) {\n  const {t} = useTranslation();\n  const [lastDaysCount, setLastDaysCount] = useState(\n    window.innerWidth > 512 ? Infinity : 30\n  );\n  const [timeseries, setTimeseries] = useState({});\n  const [datapoint, setDatapoint] = useState({});\n  const [index, setIndex] = useState(0);\n  const [moving, setMoving] = useState(false);\n\n  const svgRef1 = useRef();\n  const svgRef2 = useRef();\n  const svgRef3 = useRef();\n  const svgRef4 = useRef();\n  const svgRef5 = useRef();\n\n  const wrapperRef = useRef();\n  const dimensions = useResizeObserver(wrapperRef);\n\n  const transformTimeSeries = useCallback(\n    (timeseries) => {\n      if (timeseries.length > 1) {\n        const slicedTimeseries = sliceTimeseriesFromEnd(\n          timeseries,\n          lastDaysCount\n        );\n        setIndex(slicedTimeseries.length - 1);\n        setTimeseries(slicedTimeseries);\n      }\n    },\n    [lastDaysCount]\n  );\n\n  useEffect(() => {\n    transformTimeSeries(timeseriesProp);\n  }, [lastDaysCount, timeseriesProp, transformTimeSeries]);\n\n  const graphData = useCallback(\n    (timeseries) => {\n      const {width, height} =\n        dimensions || wrapperRef.current.getBoundingClientRect();\n\n      // Margins\n      const margin = {top: 15, right: 35, bottom: 25, left: 25};\n      const chartRight = width - margin.right;\n      const chartBottom = height - margin.bottom;\n\n      const T = timeseries.length;\n      const yBufferTop = 1.2;\n      const yBufferBottom = 1.1;\n\n      setDatapoint(timeseries[T - 1]);\n      setIndex(T - 1);\n\n      const svg1 = d3.select(svgRef1.current);\n      const svg2 = d3.select(svgRef2.current);\n      const svg3 = d3.select(svgRef3.current);\n      const svg4 = d3.select(svgRef4.current);\n      const svg5 = d3.select(svgRef5.current);\n\n      const dateMin = subDays(timeseries[0].date, 1);\n      const dateMax = addDays(timeseries[T - 1].date, 1);\n\n      const xScale = d3\n        .scaleTime()\n        .clamp(true)\n        .domain([dateMin, dateMax])\n        .range([margin.left, chartRight]);\n\n      // Number of x-axis ticks\n      const numTicksX = width < 480 ? 4 : 7;\n\n      const xAxis = (g) =>\n        g.attr('class', 'x-axis').call(\n          d3\n            .axisBottom(xScale)\n            .ticks(numTicksX)\n            .tickFormat((tick) => {\n              return formatTimeseriesTickX(tick);\n            })\n        );\n\n      const xAxis2 = (g, yScale) => {\n        g.attr('class', 'x-axis2')\n          .call(d3.axisBottom(xScale).tickValues([]).tickSize(0))\n          .select('.domain')\n          .style('transform', `translateY(${yScale(0)}px)`);\n\n        if (yScale(0) !== chartBottom) g.select('.domain').attr('opacity', 0.4);\n        else g.select('.domain').attr('opacity', 0);\n      };\n\n      const yAxis = (g, yScale) =>\n        g\n          .attr('class', 'y-axis')\n          .call(d3.axisRight(yScale).ticks(4, '0~s').tickPadding(4));\n\n      // Arrays of objects\n      const plotTotal = chartType === 1;\n      const dataTypesTotal = [\n        'totalconfirmed',\n        'totalactive',\n        'totalrecovered',\n        'totaldeceased',\n        'totaltested',\n      ];\n      const dataTypesDaily = [\n        'dailyconfirmed',\n        'dailyactive',\n        'dailyrecovered',\n        'dailydeceased',\n        'dailytested',\n      ];\n\n      const colors = ['#ff073a', '#007bff', '#28a745', '#6c757d', '#201aa2'];\n\n      const svgArray = [svg1, svg2, svg3, svg4, svg5];\n\n      let yScales;\n      if (plotTotal) {\n        const uniformScaleMin = d3.min(timeseries, (d) =>\n          Math.min(d.totalactive, d.totalrecovered, d.totaldeceased)\n        );\n        const uniformScaleMax = d3.max(timeseries, (d) => d.totalconfirmed);\n        const yScaleUniformLinear = d3\n          .scaleLinear()\n          .clamp(true)\n          .domain([uniformScaleMin, Math.max(1, yBufferTop * uniformScaleMax)])\n          .nice(4)\n          .range([chartBottom, margin.top]);\n\n        const yScaleUniformLog = d3\n          .scaleLog()\n          .clamp(true)\n          .domain([\n            Math.max(1, uniformScaleMin),\n            Math.max(10, yBufferTop * uniformScaleMax),\n          ])\n          .nice(4)\n          .range([chartBottom, margin.top]);\n\n        yScales = dataTypesTotal.map((type) => {\n          const yScaleLinear = d3\n            .scaleLinear()\n            .clamp(true)\n            .domain([\n              d3.min(timeseries, (d) => d[type]),\n              Math.max(1, yBufferTop * d3.max(timeseries, (d) => d[type])),\n            ])\n            .nice(4)\n            .range([chartBottom, margin.top]);\n          const yScaleLog = d3\n            .scaleLog()\n            .clamp(true)\n            .domain([\n              Math.max(\n                1,\n                d3.min(timeseries, (d) => d[type])\n              ),\n              Math.max(10, yBufferTop * d3.max(timeseries, (d) => d[type])),\n            ])\n            .nice(4)\n            .range([chartBottom, margin.top]);\n          if (mode && type !== 'totaltested')\n            return logMode ? yScaleUniformLog : yScaleUniformLinear;\n          else return logMode ? yScaleLog : yScaleLinear;\n        });\n      } else {\n        const yScaleDailyUniform = d3\n          .scaleLinear()\n          .clamp(true)\n          .domain([\n            yBufferBottom *\n              Math.min(\n                0,\n                d3.min(timeseries, (d) => d.dailyactive)\n              ),\n            Math.max(\n              1,\n              yBufferTop *\n                d3.max(timeseries, (d) =>\n                  Math.max(d.dailyconfirmed, d.dailyrecovered, d.dailydeceased)\n                )\n            ),\n          ])\n          .nice(4)\n          .range([chartBottom, margin.top]);\n\n        yScales = dataTypesDaily.map((type) => {\n          if (mode && type !== 'dailytested') return yScaleDailyUniform;\n          const yScaleLinear = d3\n            .scaleLinear()\n            .clamp(true)\n            .domain([\n              yBufferBottom *\n                Math.min(\n                  0,\n                  d3.min(timeseries, (d) => d[type])\n                ),\n              Math.max(1, yBufferTop * d3.max(timeseries, (d) => d[type])),\n            ])\n            .nice(4)\n            .range([chartBottom, margin.top]);\n          return yScaleLinear;\n        });\n      }\n\n      /* Focus dots */\n      const focus = svgArray.map((svg, i) => {\n        return svg\n          .selectAll('.focus')\n          .data([timeseries[T - 1]], (d) => d.date)\n          .join((enter) =>\n            enter.append('circle').attr('cx', (d) => xScale(d.date))\n          )\n          .attr('class', 'focus')\n          .attr('fill', colors[i])\n          .attr('stroke', colors[i])\n          .attr('r', 4);\n      });\n\n      function mousemove() {\n        const xm = d3.mouse(this)[0];\n        const date = xScale.invert(xm);\n        const bisectDate = d3.bisector((d) => d.date).left;\n        let i = bisectDate(timeseries, date, 1);\n        if (0 <= i && i < T) {\n          if (date - timeseries[i - 1].date < timeseries[i].date - date) --i;\n          setDatapoint(timeseries[i]);\n          setIndex(i);\n          setMoving(true);\n          const d = timeseries[i];\n          focus.forEach((f, j) => {\n            const yScale = yScales[j];\n            const type = plotTotal ? dataTypesTotal[j] : dataTypesDaily[j];\n            if (!isNaN(d[type]))\n              f.attr('cx', xScale(d.date))\n                .attr('cy', yScale(d[type]))\n                .attr('opacity', 1);\n            else f.attr('opacity', 0);\n          });\n        }\n      }\n\n      function mouseout() {\n        setDatapoint(timeseries[T - 1]);\n        setIndex(T - 1);\n        setMoving(false);\n        focus.forEach((f, j) => {\n          const yScale = yScales[j];\n          const type = plotTotal ? dataTypesTotal[j] : dataTypesDaily[j];\n          if (!isNaN(timeseries[T - 1][type]))\n            f.attr('cx', xScale(timeseries[T - 1].date))\n              .attr('cy', yScale(timeseries[T - 1][type]))\n              .attr('opacity', 1);\n          else f.attr('opacity', 0);\n        });\n      }\n\n      /* Begin drawing charts */\n      svgArray.forEach((svg, i) => {\n        // Transition interval\n        const t = svg.transition().duration(500);\n        const typeTotal = dataTypesTotal[i];\n        const typeDaily = dataTypesDaily[i];\n        const type = plotTotal ? typeTotal : typeDaily;\n\n        const filteredTimeseries = timeseries.filter((d) => !isNaN(d[type]));\n        const color = colors[i];\n        const yScale = yScales[i];\n\n        /* X axis */\n        svg\n          .select('.x-axis')\n          .style('transform', `translateY(${chartBottom}px)`)\n          .transition(t)\n          .call(xAxis);\n        svg.select('.x-axis2').transition(t).call(xAxis2, yScale);\n        /* Y axis */\n        svg\n          .select('.y-axis')\n          .style('transform', `translateX(${chartRight}px)`)\n          .transition(t)\n          .call(yAxis, yScale);\n\n        /* Path dots */\n        svg\n          .selectAll('.dot')\n          .data(filteredTimeseries, (d) => d.date)\n          .join((enter) =>\n            enter\n              .append('circle')\n              .attr('cy', chartBottom)\n              .attr('cx', (d) => xScale(d.date))\n          )\n          .attr('class', 'dot')\n          .attr('fill', color)\n          .attr('stroke', color)\n          .attr('r', 2)\n          .transition(t)\n          .attr('cx', (d) => xScale(d.date))\n          .attr('cy', (d) => yScale(d[type]));\n\n        if (!isNaN(timeseries[T - 1][type]))\n          focus[i]\n            .transition(t)\n            .attr('cx', (d) => xScale(d.date))\n            .attr('cy', (d) => yScale(d[type]))\n            .attr('opacity', 1);\n        else focus[i].transition(t).attr('opacity', 0);\n\n        if (plotTotal) {\n          /* TOTAL TRENDS */\n          svg.selectAll('.stem').remove();\n          const path = svg\n            .selectAll('.trend')\n            .data([[...filteredTimeseries].reverse()])\n            .join('path')\n            .attr('class', 'trend')\n            .attr('fill', 'none')\n            .attr('stroke', color + '99')\n            .attr('stroke-width', 4);\n          // HACK\n          // Path interpolation is non-trivial. Ideally, a custom path tween\n          // function should be defined which takes care that old path dots\n          // transition synchronously along with the path transition. This hack\n          // simulates that behaviour.\n          if (path.attr('d')) {\n            const n = path.node().getTotalLength();\n            const p = path.node().getPointAtLength(n);\n            // Append points at end of path for better interpolation\n            path.attr(\n              'd',\n              () => path.attr('d') + `L${p.x},${p.y}`.repeat(3 * T)\n            );\n          }\n          path\n            .transition(t)\n            .attr('opacity', plotTotal ? 1 : 0)\n            .attr(\n              'd',\n              d3\n                .line()\n                .x((d) => xScale(d.date))\n                .y((d) => yScale(d[typeTotal]))\n                .curve(d3.curveMonotoneX)\n            );\n        } else {\n          /* DAILY TRENDS */\n          svg.selectAll('.trend').remove();\n          svg\n            .selectAll('.stem')\n            .data(filteredTimeseries, (d) => d.date)\n            .join((enter) =>\n              enter\n                .append('line')\n                .attr('x1', (d) => xScale(d.date))\n                .attr('y1', chartBottom)\n                .attr('x2', (d) => xScale(d.date))\n                .attr('y2', chartBottom)\n            )\n            .attr('class', 'stem')\n            .style('stroke', color + '99')\n            .style('stroke-width', 4)\n            .transition(t)\n            .attr('x1', (d) => xScale(d.date))\n            .attr('y1', yScale(0))\n            .attr('x2', (d) => xScale(d.date))\n            .attr('y2', (d) => yScale(d[typeDaily]));\n        }\n\n        svg\n          .on('mousemove', mousemove)\n          .on('touchmove', mousemove)\n          .on('mouseout', mouseout)\n          .on('touchend', mouseout);\n      });\n    },\n    [chartType, dimensions, logMode, mode]\n  );\n\n  useEffect(() => {\n    if (timeseries.length > 1) {\n      graphData(timeseries);\n    }\n  }, [timeseries, graphData]);\n\n  const dateStr = datapoint.date ? formatTimeseriesDate(datapoint.date) : '';\n\n  const chartKey1 = chartType === 1 ? 'totalconfirmed' : 'dailyconfirmed';\n  const chartKey2 = chartType === 1 ? 'totalactive' : 'dailyactive';\n  const chartKey3 = chartType === 1 ? 'totalrecovered' : 'dailyrecovered';\n  const chartKey4 = chartType === 1 ? 'totaldeceased' : 'dailydeceased';\n  const chartKey5 = chartType === 1 ? 'totaltested' : 'dailytested';\n\n  // Function for calculate increased/decreased count for each type of data\n  const currentStatusCount = (chartType) => {\n    if (timeseries.length <= 0 || index <= 0 || index >= timeseries.length)\n      return '';\n    const currentDiff =\n      timeseries[index][chartType] - timeseries[index - 1][chartType];\n    const formatedDiff = formatNumber(currentDiff);\n    return currentDiff >= 0 ? `+${formatedDiff}` : formatedDiff;\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"TimeSeries fadeInUp\" style={{animationDelay: '2.7s'}}>\n        <div className=\"svg-parent\" ref={wrapperRef}>\n          <div className=\"stats\">\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Confirmed')}</h5>\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\n            <div className=\"stats-bottom\">\n              <h2>{formatNumber(datapoint[chartKey1])}</h2>\n              <h6>{currentStatusCount(chartKey1)}</h6>\n            </div>\n          </div>\n          <svg ref={svgRef1} preserveAspectRatio=\"xMidYMid meet\">\n            <g className=\"x-axis\" />\n            <g className=\"x-axis2\" />\n            <g className=\"y-axis\" />\n          </svg>\n        </div>\n\n        <div className=\"svg-parent is-blue\">\n          <div className=\"stats is-blue\">\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Active')}</h5>\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\n            <div className=\"stats-bottom\">\n              <h2>{formatNumber(datapoint[chartKey2])}</h2>\n              <h6>{currentStatusCount(chartKey2)}</h6>\n            </div>\n          </div>\n          <svg ref={svgRef2} preserveAspectRatio=\"xMidYMid meet\">\n            <g className=\"x-axis\" />\n            <g className=\"x-axis2\" />\n            <g className=\"y-axis\" />\n          </svg>\n        </div>\n\n        <div className=\"svg-parent is-green\">\n          <div className=\"stats is-green\">\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Recovered')}</h5>\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\n            <div className=\"stats-bottom\">\n              <h2>{formatNumber(datapoint[chartKey3])}</h2>\n              <h6>{currentStatusCount(chartKey3)}</h6>\n            </div>\n          </div>\n          <svg ref={svgRef3} preserveAspectRatio=\"xMidYMid meet\">\n            <g className=\"x-axis\" />\n            <g className=\"x-axis2\" />\n            <g className=\"y-axis\" />\n          </svg>\n        </div>\n\n        <div className=\"svg-parent is-gray\">\n          <div className=\"stats is-gray\">\n            <h5 className={`${!moving ? 'title' : ''}`}>{t('Deceased')}</h5>\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\n            <div className=\"stats-bottom\">\n              <h2>{formatNumber(datapoint[chartKey4])}</h2>\n              <h6>{currentStatusCount(chartKey4)}</h6>\n            </div>\n          </div>\n          <svg ref={svgRef4} preserveAspectRatio=\"xMidYMid meet\">\n            <g className=\"x-axis\" />\n            <g className=\"x-axis2\" />\n            <g className=\"y-axis\" />\n          </svg>\n        </div>\n\n        <div className=\"svg-parent is-purple\">\n          <div className=\"stats is-purple\">\n            <h5 className={`${!moving ? 'title' : ''}`}>\n              {t('Tested')} {stateCode === 'TT' ? testedToolTip : ''}\n            </h5>\n            <h5 className={`${moving ? 'title' : ''}`}>{`${dateStr}`}</h5>\n            <div className=\"stats-bottom\">\n              <h2>{formatNumber(datapoint[chartKey5])}</h2>\n              <h6>{currentStatusCount(chartKey5)}</h6>\n            </div>\n          </div>\n          <svg ref={svgRef5} preserveAspectRatio=\"xMidYMid meet\">\n            <g className=\"x-axis\" />\n            <g className=\"x-axis2\" />\n            <g className=\"y-axis\" />\n          </svg>\n        </div>\n      </div>\n\n      <div className=\"pills\">\n        <button\n          type=\"button\"\n          onClick={() => setLastDaysCount(Infinity)}\n          className={lastDaysCount === Infinity ? 'selected' : ''}\n        >\n          {t('Beginning')}\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setLastDaysCount(30)}\n          className={lastDaysCount === 30 ? 'selected' : ''}\n          aria-label=\"1 month\"\n        >\n          {`1 ${t('Month')}`}\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => setLastDaysCount(14)}\n          className={lastDaysCount === 14 ? 'selected' : ''}\n          aria-label=\"14 days\"\n        >\n          {`2 ${t('Weeks')}`}\n        </button>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default React.memo(TimeSeries, isEqual);\n","import TimeSeries from './timeseries';\n\nimport 'intersection-observer';\nimport Observer from '@researchgate/react-intersection-observer';\nimport equal from 'fast-deep-equal';\nimport React, {useState} from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {useLocalStorage} from 'react-use';\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(currProps.activeStateCode, prevProps.activeStateCode)) {\n    return false;\n  }\n  if (!equal(currProps.anchor, prevProps.anchor)) {\n    return false;\n  }\n  return true;\n};\n\nfunction TimeSeriesExplorer({\n  timeseries,\n  activeStateCode,\n  onHighlightState,\n  states,\n  anchor,\n  setAnchor,\n}) {\n  const [chartType, setChartType] = useLocalStorage('timeseriesChartType', 1);\n  const [isTimeseriesIntersecting, setIsTimeseriesIntersecting] = useState(\n    false\n  );\n\n  const [timeseriesMode, setTimeseriesMode] = useLocalStorage(\n    'timeseriesMode',\n    true\n  );\n  const [timeseriesLogMode, setTimeseriesLogMode] = useLocalStorage(\n    'timeseriesLogMode',\n    false\n  );\n  const {t} = useTranslation();\n\n  const options = {\n    rootMargin: '0px 0px 0px 0px',\n  };\n\n  return (\n    <Observer\n      options={options}\n      onChange={({isIntersecting}) =>\n        setIsTimeseriesIntersecting(isIntersecting)\n      }\n    >\n      <div\n        className={`TimeSeriesExplorer ${\n          anchor === 'timeseries' ? 'stickied' : ''\n        }`}\n        style={{display: anchor === 'mapexplorer' ? 'none' : ''}}\n      >\n        <div\n          className=\"timeseries-header fadeInUp\"\n          style={{animationDelay: '2.5s'}}\n        >\n          {window.innerWidth > 769 && anchor !== undefined && (\n            <div\n              className={`anchor ${anchor === 'timeseries' ? 'stickied' : ''}`}\n              onClick={() => {\n                setAnchor(anchor === 'timeseries' ? null : 'timeseries');\n              }}\n            >\n              <Icon.Anchor />\n            </div>\n          )}\n\n          <h1>{t('Spread Trends')}</h1>\n          <div className=\"tabs\">\n            <div\n              className={`tab ${chartType === 1 ? 'focused' : ''}`}\n              onClick={() => {\n                setChartType(1);\n              }}\n            >\n              <h4>{t('Cumulative')}</h4>\n            </div>\n            <div\n              className={`tab ${chartType === 2 ? 'focused' : ''}`}\n              onClick={() => {\n                setChartType(2);\n              }}\n            >\n              <h4>{t('Daily')}</h4>\n            </div>\n          </div>\n\n          <div className=\"scale-modes\">\n            <label className=\"main\">{t('Scale Modes')}</label>\n            <div className=\"timeseries-mode\">\n              <label htmlFor=\"timeseries-mode\">{t('Uniform')}</label>\n              <input\n                id=\"timeseries-mode\"\n                type=\"checkbox\"\n                checked={timeseriesMode}\n                className=\"switch\"\n                aria-label={t('Checked by default to scale uniformly.')}\n                onChange={(event) => {\n                  setTimeseriesMode(!timeseriesMode);\n                }}\n              />\n            </div>\n            <div\n              className={`timeseries-logmode ${\n                chartType !== 1 ? 'disabled' : ''\n              }`}\n            >\n              <label htmlFor=\"timeseries-logmode\">{t('Logarithmic')}</label>\n              <input\n                id=\"timeseries-logmode\"\n                type=\"checkbox\"\n                checked={chartType === 1 && timeseriesLogMode}\n                className=\"switch\"\n                disabled={chartType !== 1}\n                onChange={(event) => {\n                  setTimeseriesLogMode(!timeseriesLogMode);\n                }}\n              />\n            </div>\n          </div>\n\n          {states && (\n            <div className=\"trends-state-name\">\n              <select\n                value={activeStateCode}\n                onChange={({target}) => {\n                  const selectedState = target.selectedOptions[0].getAttribute(\n                    'statedata'\n                  );\n                  onHighlightState(JSON.parse(selectedState));\n                }}\n              >\n                {states.map((s) => {\n                  return (\n                    <option\n                      value={s.statecode}\n                      key={s.statecode}\n                      statedata={JSON.stringify(s)}\n                    >\n                      {s.statecode === 'TT' ? t('All States') : t(s.state)}\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n          )}\n        </div>\n\n        {timeseries && (\n          <TimeSeries\n            timeseriesProp={timeseries}\n            chartType={chartType}\n            mode={timeseriesMode}\n            logMode={timeseriesLogMode}\n            stateCode={activeStateCode}\n            isIntersecting={isTimeseriesIntersecting}\n          />\n        )}\n\n        <div className=\"alert\">\n          <Icon.AlertOctagon />\n          <div className=\"alert-right\">\n            {t('Tested chart is independent of uniform scaling')}\n          </div>\n        </div>\n      </div>\n    </Observer>\n  );\n}\n\nexport default React.memo(TimeSeriesExplorer, isEqual);\n","import {\n  STATE_CODES_ARRAY,\n  STATE_CODES_REVERSE,\n  STATE_CODES,\n  ESSENTIALS_CATEGORIES,\n} from '../constants';\nimport {capitalize} from '../utils/commonfunctions';\n\nimport Bloodhound from 'corejs-typeahead';\nimport React, {useState, useEffect, useCallback, useRef} from 'react';\nimport ContentLoader from 'react-content-loader';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {Link} from 'react-router-dom';\nimport {useDebounce, useMeasure} from 'react-use';\n\nconst engine = new Bloodhound({\n  initialize: true,\n  local: STATE_CODES_ARRAY,\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),\n});\n\nconst districtEngine = new Bloodhound({\n  initialize: true,\n  limit: 5,\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace('district'),\n  indexRemote: true,\n  remote: {\n    url: 'https://api.covid19india.org/state_district_wise.json',\n    transform: function (response) {\n      const districts = [];\n      Object.keys(response).map((stateName) => {\n        const districtData = response[stateName].districtData;\n        Object.keys(districtData).map((districtName) => {\n          return districts.push({district: districtName, state: stateName});\n        });\n        return null;\n      });\n      return districts;\n    },\n  },\n});\n\nconst essentialsEngine = new Bloodhound({\n  initialize: true,\n  limit: 5,\n  queryTokenizer: Bloodhound.tokenizers.whitespace,\n  datumTokenizer: Bloodhound.tokenizers.obj.whitespace(\n    'category',\n    'city',\n    'contact',\n    'descriptionandorserviceprovided',\n    'nameoftheorganisation',\n    'state'\n  ),\n  indexRemote: true,\n  remote: {\n    url: 'https://api.covid19india.org/resources/resources.json',\n    transform: function (response) {\n      return response.resources;\n    },\n  },\n});\n\n/* let focused = false;\nconst suggestions = [\n  'Karnataka',\n  'West Bengal',\n  'Alappuzha',\n  'Senior citizen support bangalore',\n  'Community Kitchen in Kerala',\n  'Groceries Chennai',\n];*/\n\nconst essentialSuggestions = [\n  'Testing Pune',\n  'Delhi Shelter',\n  'Community Kitchen in Kerala',\n  'Groceries Chennai',\n  'Senior citizen support bangalore',\n];\nconst locationSuggestions = [\n  'Mumbai',\n  'Karnataka',\n  'Chennai',\n  'Alappuzha',\n  'Ganjam',\n];\n\nfunction SearchLoader() {\n  const [svgElement, {width}] = useMeasure();\n\n  useEffect(() => {}, [width]);\n\n  return (\n    <React.Fragment>\n      <span ref={svgElement} style={{width: '100%'}} />\n      {width && (\n        <ContentLoader\n          speed={1.5}\n          width={width}\n          height={100}\n          viewBox={`0 0 ${width} 100`}\n          position=\"absolute\"\n        >\n          <rect x=\"10\" y=\"20\" rx=\"5\" ry=\"5\" width={width - 20} height=\"75\" />\n        </ContentLoader>\n      )}\n    </React.Fragment>\n  );\n}\n\nfunction Search({districtZones}) {\n  const [searchValue, setSearchValue] = useState('');\n  const [expand, setExpand] = useState(false);\n  const [results, setResults] = useState([]);\n  const searchInput = useRef(null);\n  const {t} = useTranslation();\n\n  const handleSearch = useCallback((searchInput) => {\n    const results = [];\n\n    const sync = (datums) => {\n      datums.map((result, index) => {\n        const stateObj = {\n          name: result.name,\n          type: 'state',\n          route: result.code,\n        };\n        results.push(stateObj);\n        return null;\n      });\n    };\n\n    const districtSync = (datums) => {\n      datums.slice(0, 3).map((result, index) => {\n        const districtObj = {\n          name: result.district,\n          type: 'district',\n          route: STATE_CODES_REVERSE[result.state],\n        };\n        results.push(districtObj);\n        return null;\n      });\n    };\n\n    const essentialsSync = (datums) => {\n      datums.slice(0, 5).map((result, index) => {\n        const essentialsObj = {\n          name: result.nameoftheorganisation,\n          type: 'essentials',\n          category: result.category,\n          website: result.contact,\n          description: result.descriptionandorserviceprovided,\n          city: result.city,\n          state: result.state,\n          contact: result.phonenumber,\n        };\n        results.push(essentialsObj);\n        return null;\n      });\n      setResults([...results]);\n    };\n\n    const essentialsAsync = (datums) => {\n      // to handle async remote call on initial launch\n      essentialsEngine.search(searchInput, essentialsSync);\n    };\n\n    engine.search(searchInput, sync);\n    districtEngine.search(searchInput, districtSync);\n    essentialsEngine.search(searchInput, essentialsSync, essentialsAsync);\n  }, []);\n\n  useDebounce(\n    () => {\n      if (searchValue) {\n        handleSearch(searchValue);\n      } else {\n        setResults([]);\n      }\n    },\n    100,\n    [searchValue]\n  );\n\n  function setNativeValue(element, value) {\n    const valueSetter = Object.getOwnPropertyDescriptor(element, 'value').set;\n    const prototype = Object.getPrototypeOf(element);\n    const prototypeValueSetter = Object.getOwnPropertyDescriptor(\n      prototype,\n      'value'\n    ).set;\n\n    if (valueSetter && valueSetter !== prototypeValueSetter) {\n      prototypeValueSetter.call(element, value);\n    } else {\n      valueSetter.call(element, value);\n    }\n  }\n\n  /* function fillPlaceholder(target, index, cursorPosition, callback) {\n    if (focused) {\n      target.textContent = '';\n      return true;\n    }\n    const text = t(suggestions[index]);\n    const placeholder = target.textContent;\n    target.classList.remove('disappear');\n    target.textContent = placeholder + text[cursorPosition];\n    if (cursorPosition < text.length - 1) {\n      setTimeout(function () {\n        fillPlaceholder(target, index, cursorPosition + 1, callback);\n      }, 200);\n      return true;\n    }\n    callback();\n  }\n\n  function clearPlaceholder(target, callback) {\n    const placeholder = target.textContent;\n    target.classList.add('disappear');\n    if (placeholder.length > 0) {\n      setTimeout(function () {\n        target.textContent = '';\n        clearPlaceholder(target, callback);\n      }, 1000);\n      return true;\n    }\n    callback();\n  }\n\n  function loopThroughSuggestions(target, index) {\n    if (focused) {\n      target.textContent = '';\n      return true;\n    }\n    fillPlaceholder(target, index, 0, function () {\n      setTimeout(function () {\n        clearPlaceholder(target, function () {\n          loopThroughSuggestions(target, (index + 1) % suggestions.length);\n        });\n      }, 2000);\n    });\n  }\n\n  const targetInput = document.getElementById('search-placeholder');\n  if (targetInput) loopThroughSuggestions(targetInput, 0);*/\n\n  return (\n    <div className=\"Search\">\n      <label>{t('Search your city, resources, etc')}</label>\n      <div className=\"line\"></div>\n\n      <div className=\"search-input-wrapper\">\n        <input\n          type=\"text\"\n          value={searchValue}\n          ref={searchInput}\n          onFocus={(event) => {\n            setExpand(true);\n          }}\n          onBlur={() => {\n            setExpand(false);\n          }}\n          onChange={(event) => {\n            setSearchValue(event.target.value);\n          }}\n        />\n        <span id=\"search-placeholder\" className=\"search-placeholder\"></span>\n\n        <div className={`search-button`}>\n          <Icon.Search />\n        </div>\n\n        {searchValue.length > 0 && (\n          <div\n            className={`close-button`}\n            onClick={() => {\n              setSearchValue('');\n              setResults([]);\n            }}\n          >\n            <Icon.X />\n          </div>\n        )}\n\n        {!expand && searchValue.length === 0 && (\n          <div\n            className={`close-button custom`}\n            onClick={() => {\n              setSearchValue('');\n              setResults([]);\n            }}\n          >\n            <Icon.Heart />\n          </div>\n        )}\n      </div>\n\n      {results.length < 1 && searchValue.length > 0 && <SearchLoader />}\n\n      {results.length > 0 && (\n        <div className=\"results\">\n          {results.map((result, index) => {\n            if (result.type === 'state' || result.type === 'district') {\n              return (\n                <Link key={index} to={`state/${result.route}`}>\n                  <div className=\"result\">\n                    <div className=\"result-left\">\n                      <div className=\"result-name\">\n                        {`${result.name}`}\n                        {result.type === 'district' &&\n                          `, ${STATE_CODES[result.route]}`}\n                      </div>\n                    </div>\n                    <div className=\"result-type\">\n                      <span>{[result.route]}</span>\n                      <Icon.ArrowRightCircle size={14} />\n                    </div>\n                  </div>\n                </Link>\n              );\n            } else {\n              return (\n                <a\n                  key={index}\n                  href={result.website || null}\n                  target=\"_noblank\"\n                  className=\"essential-result\"\n                >\n                  <div className=\"result-top\">\n                    <div className=\"result-top-left\">\n                      <div className=\"result-name\">{result.name}</div>\n                      <div className=\"result-location\">\n                        {result.city && `${result.city}, `}\n                        {result.state}\n                      </div>\n                    </div>\n                    <div className=\"result-category\">\n                      <div>\n                        {capitalize(ESSENTIALS_CATEGORIES[result.category])}\n                      </div>\n                      {result.website && <Icon.ExternalLink />}\n                    </div>\n                  </div>\n                  <div className=\"result-description\">{result.description}</div>\n                  <div className=\"result-contacts\">\n                    {result.contact.split('\\n').map((contact) => (\n                      <div key={contact} className=\"result-contact\">\n                        <Icon.Phone />\n                        <a href={`tel:${contact}`}>{contact}</a>\n                      </div>\n                    ))}\n                  </div>\n                </a>\n              );\n            }\n          })}\n        </div>\n      )}\n\n      {expand && (\n        <React.Fragment>\n          <p\n            className=\"feature\"\n            onMouseDown={(event) => {\n              event.preventDefault();\n              setNativeValue(searchInput.current, 'Cyclone Amphan');\n              searchInput.current.dispatchEvent(\n                new Event('input', {bubbles: true})\n              );\n            }}\n          >\n            To those who are in states affected by Cyclone Amphan or have\n            family/friends there, click here to view helplines for assistance.\n          </p>\n          <div className=\"expanded\">\n            <div className=\"expanded-left\">\n              <h3>{t('Essentials')}</h3>\n              <div className=\"suggestions\">\n                {essentialSuggestions.map((suggestion, index) => (\n                  <div className=\"suggestion\" key={index}>\n                    <div>-</div>\n                    <h4\n                      onMouseDown={(event) => {\n                        event.preventDefault();\n                        setNativeValue(searchInput.current, suggestion);\n                        searchInput.current.dispatchEvent(\n                          new Event('input', {bubbles: true})\n                        );\n                      }}\n                    >\n                      {t(suggestion)}\n                    </h4>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div className=\"expanded-right\">\n              <h3>{t('Locations')}</h3>\n              <div className=\"suggestions\">\n                {locationSuggestions.map((suggestion, index) => (\n                  <div className=\"suggestion\" key={index}>\n                    <div>-</div>\n                    <h4\n                      onMouseDown={(event) => {\n                        event.preventDefault();\n                        setNativeValue(searchInput.current, suggestion);\n                        searchInput.current.dispatchEvent(\n                          new Event('input', {bubbles: true})\n                        );\n                      }}\n                    >\n                      {t(suggestion)}\n                    </h4>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </React.Fragment>\n      )}\n    </div>\n  );\n}\n\nexport default React.memo(Search);\n","import {STATE_ROW_STATISTICS, DISTRICT_ROW_STATISTICS} from '../constants';\nimport {\n  formatDate,\n  formatNumber,\n  formatLastUpdated,\n  capitalize,\n  abbreviate,\n} from '../utils/commonfunctions';\n\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport React, {useState, useCallback, useMemo} from 'react';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport ReactTooltip from 'react-tooltip';\nimport {createBreakpoint, useLocalStorage, useEffectOnce} from 'react-use';\n\nconst useBreakpoint = createBreakpoint({XL: 1280, L: 768, S: 350});\n\nfunction StateCell({state, statistic}) {\n  const ArrowUp = useMemo(() => <Icon.ArrowUp />, []);\n\n  return (\n    <td>\n      <span className={classnames('delta', `is-${statistic}`)}>\n        {state[`delta${statistic}`] > 0 && ArrowUp}\n        {state[`delta${statistic}`] > 0 && state[`delta${statistic}`]}\n      </span>\n      <span className=\"total\">\n        {state[statistic] === 0 ? '-' : formatNumber(state[statistic])}\n      </span>\n    </td>\n  );\n}\n\nfunction DistrictHeaderCell({handleSort, statistic, sortData}) {\n  const breakpoint = useBreakpoint();\n  const {t} = useTranslation();\n\n  return (\n    <td onClick={() => handleSort(statistic)}>\n      <div className=\"heading-content\">\n        <abbr\n          className={classnames({[`is-${statistic}`]: breakpoint === 'S'})}\n          title={statistic}\n        >\n          {breakpoint === 'L'\n            ? statistic.slice(0)\n            : breakpoint === 'S'\n            ? capitalize(\n                abbreviate(statistic === 'deaths' ? 'deceased' : statistic)\n              )\n            : t(capitalize(statistic === 'deaths' ? 'deceased' : statistic))}\n        </abbr>\n        <div\n          style={{\n            display: sortData.sortColumn === statistic ? 'initial' : 'none',\n          }}\n        >\n          {sortData.isAscending ? (\n            <div className=\"arrow-up\" />\n          ) : (\n            <div className=\"arrow-down\" />\n          )}\n        </div>\n      </div>\n    </td>\n  );\n}\n\nfunction PureDistrictCell({district, statistic}) {\n  return (\n    <td>\n      <span className={classnames('delta', `is-${statistic}`)}>\n        {district.delta[statistic] > 0 && <Icon.ArrowUp />}\n        {district.delta[statistic] > 0 && district.delta[statistic]}\n      </span>\n      <span className=\"total\">{formatNumber(district[statistic])}</span>\n    </td>\n  );\n}\n\nconst DistrictCell = React.memo(PureDistrictCell);\n\nconst isDistrictRowEqual = (prevProps, currProps) => {\n  if (equal(prevProps.regionHighlighted?.district, prevProps.district)) {\n    return false;\n  }\n  if (equal(currProps.regionHighlighted?.district, currProps.district)) {\n    return false;\n  }\n  return true;\n};\n\nfunction PureDistrictRow({\n  regionHighlighted,\n  district,\n  state,\n  zone,\n  onHighlightDistrict,\n  sortedDistricts,\n  districts,\n}) {\n  const {t} = useTranslation();\n\n  return (\n    <tr\n      key={district.district}\n      className={classnames('district', {\n        'is-highlighted': regionHighlighted?.district === district,\n      })}\n      onMouseEnter={() => onHighlightDistrict(district, state)}\n    >\n      <td>\n        <div className=\"title-chevron\">\n          <span className=\"title-icon\">\n            {t(district)}\n            <span\n              data-for=\"district\"\n              data-tip={[[sortedDistricts[district].notes]]}\n              data-event=\"touchstart mouseover\"\n              data-event-off=\"mouseleave\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              {sortedDistricts[district].notes && <Icon.Info />}\n            </span>\n          </span>\n        </div>\n      </td>\n\n      {DISTRICT_ROW_STATISTICS.map((statistic) => (\n        <DistrictCell\n          key={statistic}\n          district={districts[district]}\n          statistic={statistic}\n        />\n      ))}\n    </tr>\n  );\n}\n\nconst DistrictRow = React.memo(PureDistrictRow, isDistrictRowEqual);\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.state.state, currProps.state.state)) {\n    return false;\n  }\n  if (\n    !equal(\n      prevProps.regionHighlighted?.state,\n      currProps.regionHighlighted?.state\n    )\n  ) {\n    return false;\n  }\n  if (\n    !equal(\n      prevProps.regionHighlighted?.district,\n      currProps.regionHighlighted?.district\n    )\n  ) {\n    return false;\n  }\n  return true;\n};\n\nfunction Row({\n  index,\n  state,\n  districts,\n  zones,\n  regionHighlighted,\n  onHighlightState,\n  onHighlightDistrict,\n}) {\n  const [sortedDistricts, setSortedDistricts] = useState(districts);\n  const [showDistricts, setShowDistricts] = useState(false);\n  const [sortData, setSortData] = useLocalStorage('districtSortData', {\n    sortColumn: 'confirmed',\n    isAscending: false,\n  });\n\n  const history = useHistory();\n  const {t} = useTranslation();\n\n  const Chevron = useMemo(\n    () => (\n      <span\n        className={classnames(\n          'dropdown',\n          {rotateRightDown: showDistricts},\n          {rotateDownRight: !showDistricts}\n        )}\n      >\n        <Icon.ChevronDown />\n      </span>\n    ),\n    [showDistricts]\n  );\n\n  const _onHighlightState = useCallback(\n    (state) => {\n      if (!equal(state.state, regionHighlighted?.state)) {\n        onHighlightState(state);\n      }\n    },\n    [onHighlightState, regionHighlighted]\n  );\n\n  const doSort = useCallback(\n    (sortData) => {\n      if (!sortedDistricts) return null;\n      const sorted = {};\n      Object.keys(sortedDistricts)\n        .sort((district1, district2) => {\n          if (sortData.sortColumn !== 'district') {\n            return sortData.isAscending\n              ? parseInt(sortedDistricts[district1][sortData.sortColumn]) -\n                  parseInt(sortedDistricts[district2][sortData.sortColumn])\n              : parseInt(sortedDistricts[district2][sortData.sortColumn]) -\n                  parseInt(sortedDistricts[district1][sortData.sortColumn]);\n          } else {\n            return sortData.isAscending\n              ? district1.localeCompare(district2)\n              : district2.localeCompare(district1);\n          }\n        })\n        .forEach((key) => {\n          sorted[key] = sortedDistricts[key];\n        });\n      setSortedDistricts(sorted);\n    },\n    [sortedDistricts]\n  );\n\n  const handleSort = useCallback(\n    (statistic) => {\n      const newSortData = {\n        isAscending: !sortData.isAscending,\n        sortColumn: statistic,\n      };\n      doSort(newSortData);\n      setSortData(Object.assign({}, sortData, newSortData));\n    },\n    [doSort, setSortData, sortData]\n  );\n\n  useEffectOnce(() => {\n    if (state.statecode !== 'TT') doSort(sortData);\n  });\n\n  return (\n    <React.Fragment>\n      <tr\n        className={classnames(\n          'state',\n          {'is-total': state.statecode === 'TT'},\n          {'is-highlighted': regionHighlighted?.state === state.state},\n          {'is-odd': index % 2 === 0}\n        )}\n        onMouseEnter={() => _onHighlightState(state)}\n        onClick={\n          state.statecode !== 'TT'\n            ? () => {\n                setShowDistricts(!showDistricts);\n              }\n            : null\n        }\n      >\n        <td>\n          <div className=\"title-chevron\">\n            {state.statecode !== 'TT' && Chevron}\n            <span className=\"title-icon\">\n              {t(state.state)}\n\n              <span\n                data-tip={[state.statenotes]}\n                data-event=\"touchstart mouseover\"\n                data-event-off=\"mouseleave\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                {state.statenotes && <Icon.Info />}\n              </span>\n            </span>\n          </div>\n        </td>\n\n        {STATE_ROW_STATISTICS.map((statistic, index) => (\n          <StateCell key={index} state={state} statistic={statistic} />\n        ))}\n      </tr>\n\n      {showDistricts && (\n        <React.Fragment>\n          <tr className=\"is-spacer\">\n            <td colSpan={5}>\n              <p />\n            </td>\n          </tr>\n\n          <tr className={'state-last-update'}>\n            <td colSpan={3} style={{paddingBottom: 0}}>\n              <p className=\"spacer\"></p>\n              <p>\n                {isNaN(Date.parse(formatDate(state.lastupdatedtime)))\n                  ? ''\n                  : `${t('Last updated')} ${formatLastUpdated(\n                      state.lastupdatedtime\n                    )} ${t('ago')}`}\n              </p>\n              {sortedDistricts?.Unknown && (\n                <div className=\"disclaimer\">\n                  <Icon.AlertCircle />\n                  {t('District-wise numbers are under reconciliation')}\n                </div>\n              )}\n            </td>\n            {state.state !== 'State Unassigned' && (\n              <td\n                align=\"center\"\n                className=\"state-page-link\"\n                colSpan={2}\n                onClick={() => {\n                  history.push(`state/${state.statecode}`);\n                }}\n              >\n                {t('See more details on {{state}}', {state: t(state.state)})}\n              </td>\n            )}\n          </tr>\n\n          <tr className={classnames('district-heading')}>\n            <td onClick={() => handleSort('district')}>\n              <div className=\"heading-content\">\n                <abbr title=\"District\">{t('District')}</abbr>\n                <div\n                  style={{\n                    display:\n                      sortData.sortColumn === 'district' ? 'initial' : 'none',\n                  }}\n                >\n                  {sortData.isAscending ? (\n                    <div className=\"arrow-up\" />\n                  ) : (\n                    <div className=\"arrow-down\" />\n                  )}\n                </div>\n              </div>\n            </td>\n\n            {DISTRICT_ROW_STATISTICS.map((statistic, index) => (\n              <DistrictHeaderCell\n                key={index}\n                handleSort={handleSort}\n                statistic={statistic}\n                sortData={sortData}\n              />\n            ))}\n          </tr>\n        </React.Fragment>\n      )}\n\n      {showDistricts &&\n        Object.keys(sortedDistricts).map((district, index) => (\n          <DistrictRow\n            key={district}\n            state={state}\n            district={district}\n            districts={districts}\n            zone={zones?.[district]}\n            sortedDistricts={sortedDistricts}\n            regionHighlighted={regionHighlighted}\n            onHighlightDistrict={onHighlightDistrict}\n          />\n        ))}\n\n      {showDistricts && (\n        <tr className=\"is-spacer\">\n          <td colSpan={5}>\n            <p />\n            <ReactTooltip\n              id=\"district\"\n              place=\"right\"\n              type=\"dark\"\n              effect=\"solid\"\n              multiline={true}\n              scrollHide={true}\n              globalEventOff=\"click\"\n            />\n          </td>\n        </tr>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default React.memo(Row, isEqual);\n","import Row from './row';\n\nimport {STATE_ROW_STATISTICS} from '../constants';\nimport {capitalize, abbreviate} from '../utils/commonfunctions';\n\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport React, {useState, useMemo, useCallback} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {Link} from 'react-router-dom';\nimport ReactTooltip from 'react-tooltip';\nimport {createBreakpoint, useLocalStorage, useEffectOnce} from 'react-use';\n\nconst useBreakpoint = createBreakpoint({XL: 1280, L: 768, S: 350});\n\nfunction StateHeaderCell({handleSort, sortData, statistic}) {\n  const breakpoint = useBreakpoint();\n  const {t} = useTranslation();\n\n  return (\n    <th onClick={() => handleSort(statistic)}>\n      <div className=\"heading-content\">\n        <abbr\n          className={classnames({[`is-${statistic}`]: breakpoint === 'S'})}\n          title={statistic}\n        >\n          {breakpoint === 'L'\n            ? statistic.slice(0)\n            : breakpoint === 'S'\n            ? capitalize(\n                abbreviate(statistic === 'deaths' ? 'deceased' : statistic)\n              )\n            : t(capitalize(statistic === 'deaths' ? 'deceased' : statistic))}\n        </abbr>\n        <div\n          style={{\n            display: sortData.sortColumn === statistic ? 'initial' : 'none',\n          }}\n        >\n          <div\n            className={classnames(\n              {'arrow-up': sortData.isAscending},\n              {'arrow-down': !sortData.isAscending}\n            )}\n          />\n        </div>\n      </div>\n    </th>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  return equal(prevProps.regionHighlighted, currProps.regionHighlighted);\n};\n\nfunction Table({\n  states,\n  districts,\n  zones,\n  regionHighlighted,\n  onHighlightState,\n  onHighlightDistrict,\n}) {\n  const [sortData, setSortData] = useLocalStorage('sortData', {\n    sortColumn: 'confirmed',\n    isAscending: false,\n  });\n\n  const {t} = useTranslation();\n\n  const [sortedStates, setSortedStates] = useState(\n    states.filter((state) => state.statecode !== 'TT')\n  );\n\n  const FineprintTop = useMemo(\n    () => (\n      <React.Fragment>\n        <h5\n          className=\"table-fineprint fadeInUp\"\n          style={{animationDelay: '1.5s'}}\n        >\n          {t('Compiled from State Govt. numbers')},{' '}\n          <Link to=\"/about\" style={{color: '#6c757d'}}>\n            {t('know more')}!\n          </Link>\n        </h5>\n      </React.Fragment>\n    ),\n    [t]\n  );\n\n  const FineprintBottom = useMemo(\n    () => (\n      <h5 className=\"table-fineprint fadeInUp\" style={{animationDelay: '1s'}}>\n        {states.slice(1).filter((s) => s && s.confirmed > 0).length} States/UTS\n        Affected\n      </h5>\n    ),\n    [states]\n  );\n\n  const doSort = useCallback(\n    (sortData) => {\n      const newSortedStates = [...sortedStates].sort((x, y) => {\n        if (sortData.sortColumn !== 'state') {\n          return sortData.isAscending\n            ? parseInt(x[sortData.sortColumn]) -\n                parseInt(y[sortData.sortColumn])\n            : parseInt(y[sortData.sortColumn]) -\n                parseInt(x[sortData.sortColumn]);\n        } else {\n          return sortData.isAscending\n            ? x[sortData.sortColumn].localeCompare(y[sortData.sortColumn])\n            : y[sortData.sortColumn].localeCompare(x[sortData.sortColumn]);\n        }\n      });\n      setSortedStates(newSortedStates);\n    },\n    [sortedStates]\n  );\n\n  const handleSort = useCallback(\n    (statistic) => {\n      const newSortData = {\n        isAscending: !sortData.isAscending,\n        sortColumn: statistic,\n      };\n      doSort(newSortData);\n      setSortData(Object.assign({}, sortData, newSortData));\n    },\n    [doSort, setSortData, sortData]\n  );\n\n  useEffectOnce(() => {\n    doSort(sortData);\n  });\n\n  if (states.length > 0) {\n    return (\n      <React.Fragment>\n        <ReactTooltip\n          place=\"right\"\n          type=\"dark\"\n          effect=\"solid\"\n          multiline={true}\n          globalEventOff=\"click\"\n        />\n\n        {FineprintTop}\n\n        <table className=\"table fadeInUp\" style={{animationDelay: '1.8s'}}>\n          <thead>\n            <tr>\n              <th className=\"state-heading\" onClick={() => handleSort('state')}>\n                <div className=\"heading-content\">\n                  <abbr title=\"State\">{t('State/UT')}</abbr>\n                  <div\n                    style={{\n                      display:\n                        sortData.sortColumn === 'state' ? 'initial' : 'none',\n                    }}\n                  >\n                    <div\n                      className={classnames(\n                        {'arrow-up': sortData.isAscending},\n                        {'arrow-down': !sortData.isAscending}\n                      )}\n                    />\n                  </div>\n                </div>\n              </th>\n              {STATE_ROW_STATISTICS.map((statistic, index) => (\n                <StateHeaderCell\n                  key={index}\n                  handleSort={handleSort}\n                  sortData={sortData}\n                  statistic={statistic}\n                />\n              ))}\n            </tr>\n          </thead>\n\n          {states && (\n            <tbody>\n              {sortedStates.map((state, index) => {\n                if (state.confirmed > 0 && state.statecode !== 'TT') {\n                  return (\n                    <Row\n                      key={state.statecode}\n                      state={state}\n                      districts={districts[state.state]?.districtData}\n                      zones={zones[state.state]}\n                      regionHighlighted={\n                        equal(regionHighlighted?.state, state.state)\n                          ? regionHighlighted\n                          : null\n                      }\n                      onHighlightState={onHighlightState}\n                      onHighlightDistrict={onHighlightDistrict}\n                    />\n                  );\n                }\n                return null;\n              })}\n            </tbody>\n          )}\n\n          {states && (\n            <tbody>\n              <Row\n                key={0}\n                state={states[0]}\n                onHighlightState={onHighlightState}\n              />\n            </tbody>\n          )}\n        </table>\n        {states && FineprintBottom}\n      </React.Fragment>\n    );\n  } else {\n    return <div style={{height: '50rem'}}></div>;\n  }\n}\n\nexport default React.memo(Table, isEqual);\n","import axios from 'axios';\nimport {formatDistance, format} from 'date-fns';\nimport React, {useState, useLayoutEffect} from 'react';\nimport {useEffectOnce} from 'react-use';\n\nconst newDate = new Date();\nlet currentDate = newDate;\n\nfunction Updates(props) {\n  const [updates, setUpdates] = useState([]);\n\n  useEffectOnce(() => {\n    axios\n      .get('https://api.covid19india.org/updatelog/log.json')\n      .then((response) => {\n        setUpdates(response.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  });\n\n  // reset the currentDate after rendering is complete\n  // in case the currentDate was changed during addHeader\n  useLayoutEffect(() => {\n    currentDate = newDate;\n  });\n\n  return (\n    <div className=\"updates\">\n      <div className=\"updates-header\">\n        <h2>{format(currentDate, 'd MMM')}</h2>\n      </div>\n\n      {updates\n        .slice(-5)\n        .reverse()\n        .map(function (activity, index) {\n          activity.update = activity.update.replace(/\\n/g, '<br/>');\n          const activityDate = new Date(activity.timestamp * 1000);\n          const addHeader = () => {\n            currentDate = activityDate;\n\n            return (\n              <React.Fragment>\n                {index === 0 ? (\n                  <div className=\"update\">\n                    <h4>No updates yet!</h4>\n                  </div>\n                ) : (\n                  ''\n                )}\n                <div className=\"updates-header\">\n                  <h2>{format(activityDate, 'd MMM')}</h2>\n                </div>\n              </React.Fragment>\n            );\n          };\n\n          return (\n            <React.Fragment key={index}>\n              {activityDate.getDate() !== currentDate.getDate()\n                ? addHeader()\n                : ' '}\n              <div key={index} className=\"update\">\n                <h5>\n                  {formatDistance(\n                    new Date(activity.timestamp * 1000),\n                    new Date()\n                  ) + ' ago'}\n                </h5>\n                <h4\n                  dangerouslySetInnerHTML={{\n                    __html: activity.update,\n                  }}\n                ></h4>\n              </div>\n            </React.Fragment>\n          );\n        })}\n    </div>\n  );\n}\n\nexport default Updates;\n","import Footer from './footer';\nimport Level from './level';\nimport MapExplorer from './mapexplorer';\nimport Minigraph from './minigraph';\nimport Search from './search';\nimport Table from './table';\nimport TimeSeriesExplorer from './timeseriesexplorer';\nimport Updates from './updates';\n\nimport {STATE_CODES_REVERSE} from '../constants';\nimport {\n  formatDate,\n  formatDateAbsolute,\n  mergeTimeseries,\n  preprocessTimeseries,\n  parseStateTimeseries,\n  parseStateTestData,\n  parseStateTestTimeseries,\n  parseTotalTestTimeseries,\n  parseDistrictZones,\n} from '../utils/commonfunctions';\n\nimport axios from 'axios';\nimport React, {useState, useCallback, useMemo} from 'react';\nimport * as Icon from 'react-feather';\nimport {Helmet} from 'react-helmet';\nimport {useEffectOnce, useLocalStorage} from 'react-use';\n\nfunction Home(props) {\n  const [states, setStates] = useState(null);\n  const [stateDistrictWiseData, setStateDistrictWiseData] = useState(null);\n  const [districtZones, setDistrictZones] = useState(null);\n  const [stateTestData, setStateTestData] = useState(null);\n  const [lastUpdated, setLastUpdated] = useState('');\n  const [timeseries, setTimeseries] = useState(null);\n  const [fetched, setFetched] = useState(false);\n  const [regionHighlighted, setRegionHighlighted] = useState({\n    state: 'Total',\n  });\n  const [showUpdates, setShowUpdates] = useState(false);\n  const [anchor, setAnchor] = useState(null);\n  const [mapOption, setMapOption] = useState('confirmed');\n\n  const [lastViewedLog, setLastViewedLog] = useLocalStorage(\n    'lastViewedLog',\n    null\n  );\n  const [newUpdate, setNewUpdate] = useLocalStorage('newUpdate', false);\n\n  const Bell = useMemo(\n    () => (\n      <Icon.Bell\n        onClick={() => {\n          setShowUpdates(!showUpdates);\n          setNewUpdate(false);\n        }}\n      />\n    ),\n    [setNewUpdate, showUpdates]\n  );\n\n  const BellOff = useMemo(\n    () => (\n      <Icon.BellOff\n        onClick={() => {\n          setShowUpdates(!showUpdates);\n        }}\n      />\n    ),\n    [showUpdates]\n  );\n\n  useEffectOnce(() => {\n    getStates();\n  });\n\n  useEffectOnce(() => {\n    axios\n      .get('https://api.covid19india.org/updatelog/log.json')\n      .then((response) => {\n        const lastTimestamp = response.data\n          .slice()\n          .reverse()[0]\n          .timestamp.toString();\n        if (lastTimestamp !== lastViewedLog) {\n          setNewUpdate(true);\n          setLastViewedLog(lastTimestamp);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  });\n\n  const getStates = async () => {\n    try {\n      const [\n        {data: statesDailyResponse},\n        {data: zonesResponse},\n      ] = await Promise.all([\n        axios.get('https://api.covid19india.org/states_daily.json'),\n        axios.get('https://api.covid19india.org/zones.json'),\n      ]);\n\n      const [\n        {data},\n        {data: stateDistrictWiseResponse},\n        {data: stateTestData},\n      ] = await Promise.all([\n        axios.get('https://api.covid19india.org/data.json'),\n        axios.get('https://api.covid19india.org/state_district_wise.json'),\n        axios.get('https://api.covid19india.org/state_test_data.json'),\n      ]);\n\n      setStates(data.statewise);\n      setDistrictZones(parseDistrictZones(zonesResponse.zones));\n\n      const ts = parseStateTimeseries(statesDailyResponse);\n      ts['TT'] = preprocessTimeseries(data.cases_time_series);\n      // Testing data timeseries\n      const testTs = parseStateTestTimeseries(stateTestData.states_tested_data);\n      testTs['TT'] = parseTotalTestTimeseries(data.tested);\n      // Merge\n      const tsMerged = mergeTimeseries(ts, testTs);\n      setTimeseries(tsMerged);\n\n      setLastUpdated(data.statewise[0].lastupdatedtime);\n\n      const testData = parseStateTestData(stateTestData.states_tested_data);\n      const totalTest = data.tested[data.tested.length - 1];\n      testData['Total'] = {\n        source: totalTest.source,\n        totaltested: totalTest.totalsamplestested,\n        updatedon: totalTest.updatetimestamp.split(' ')[0],\n      };\n      setStateTestData(testData);\n\n      setStateDistrictWiseData(stateDistrictWiseResponse);\n      setFetched(true);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const onHighlightState = useCallback((state) => {\n    if (!state) return setRegionHighlighted(null);\n    setRegionHighlighted({state: state.state});\n  }, []);\n\n  const onHighlightDistrict = useCallback((district, state) => {\n    if (!state && !district) return setRegionHighlighted(null);\n    setRegionHighlighted({district, state: state.state});\n  }, []);\n\n  return (\n    <React.Fragment>\n      <div className=\"Home\">\n        <Helmet>\n          <title>Coronavirus Outbreak in India - covid19india.org</title>\n          <meta\n            name=\"title\"\n            content=\"Coronavirus Outbreak in India: Latest Map and Case Count\"\n          />\n        </Helmet>\n\n        <div className=\"home-left\">\n          <div className=\"header fadeInUp\" style={{animationDelay: '1s'}}>\n            {fetched && <Search districtZones={districtZones} />}\n\n            <div className=\"actions\">\n              <h5>\n                {isNaN(Date.parse(formatDate(lastUpdated)))\n                  ? ''\n                  : `${formatDateAbsolute(lastUpdated)} IST`}\n              </h5>\n              {fetched && !showUpdates && (\n                <div className=\"bell-icon\">\n                  {fetched && Bell}\n                  {newUpdate && <div className=\"indicator\"></div>}\n                </div>\n              )}\n              {fetched && showUpdates && BellOff}\n            </div>\n          </div>\n\n          {showUpdates && <Updates />}\n\n          {states && <Level data={states[0]} />}\n          {timeseries && <Minigraph timeseries={timeseries['TT']} />}\n          {stateDistrictWiseData && (\n            <Table\n              states={states}\n              summary={false}\n              districts={stateDistrictWiseData}\n              zones={districtZones}\n              regionHighlighted={regionHighlighted}\n              setRegionHighlighted={setRegionHighlighted}\n              onHighlightState={onHighlightState}\n              onHighlightDistrict={onHighlightDistrict}\n            />\n          )}\n        </div>\n\n        <div className=\"home-right\">\n          <React.Fragment>\n            {fetched && (\n              <MapExplorer\n                mapName={'India'}\n                states={states}\n                districts={stateDistrictWiseData}\n                zones={districtZones}\n                stateTestData={stateTestData}\n                regionHighlighted={regionHighlighted}\n                setRegionHighlighted={setRegionHighlighted}\n                anchor={anchor}\n                setAnchor={setAnchor}\n                mapOption={mapOption}\n                setMapOption={setMapOption}\n              />\n            )}\n\n            {timeseries && (\n              <TimeSeriesExplorer\n                timeseries={\n                  timeseries[\n                    STATE_CODES_REVERSE[regionHighlighted?.state] || 'TT'\n                  ]\n                }\n                activeStateCode={\n                  STATE_CODES_REVERSE[regionHighlighted?.state] || 'TT'\n                }\n                onHighlightState={onHighlightState}\n                states={states}\n                anchor={anchor}\n                setAnchor={setAnchor}\n              />\n            )}\n          </React.Fragment>\n        </div>\n      </div>\n      {fetched && <Footer />}\n    </React.Fragment>\n  );\n}\n\nexport default Home;\n"],"sourceRoot":""}