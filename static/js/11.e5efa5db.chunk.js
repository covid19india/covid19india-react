(this.webpackJsonpcovid19india=this.webpackJsonpcovid19india||[]).push([[11],{661:function(e,t,a){"use strict";a.r(t);var n=a(41),c=a.n(n),r=a(32),i=a(64),s=a(6),l=a(29),o=a.n(l),d=a(3),m=a(0),u=a.n(m),f=a(38),h=a.n(f),v=a(597);var p=u.a.memo((function(e){var t=e.stateCode,a=Object(m.useState)(!1),n=Object(s.a)(a,2),r=n[0],l=n[1],f=Object(m.useState)([]),p=Object(s.a)(f,2),g=p[0],E=p[1],b=Object(m.useState)([]),y=Object(s.a)(b,2),j=y[0],O=y[1];Object(m.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.get("https://api.covid19india.org/raw_data.json");case 3:a=e.sent,E(a.data.raw_data.filter((function(e){return e.statecode===t}))),l(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}r||function(){e.apply(this,arguments)}()}),[r,t]),Object(m.useEffect)((function(){O(function(e){var t=e.reduce((function(e,t){return e+t.contractedfromwhichpatientsuspected+", "}),"");t=t.replace(/\s+/g,"");var a=new Set(t.match(/[^,]+/g)),n=[],c=new Set,r=[];return e.forEach((function(e){var t=e.contractedfromwhichpatientsuspected.replace(/\s+/g,"").match(/[^,]+/g);if(t){var i="P"+e.patientnumber;c.add(i),n.push({id:i,group:a.has(i)?"source":"target",raw:e}),t.forEach((function(e){r.push({source:e,target:i})}))}})),r.forEach((function(e){c.has(e.source)||(n.push({id:e.source,group:"source",raw:e.source}),c.add(e.source))})),{nodes:n,links:r}}(g))}),[g]);var N=function(){var e=Object(m.useRef)();Object(m.useEffect)((function(){var t=e.current,a=document.getElementById("clusters").offsetWidth,n=a;t.d3Force("charge").strength(-60),t.d3Force("collision",d.i()),t.d3Force("x",d.j().strength(.3)),t.d3Force("y",d.k().strength(.3)),t.d3Force("box",(function(){for(var e=0,t=j.nodes.length;e<t;++e){var c=j.nodes[e];c.x=Math.max(-a,Math.min(a,c.x)),c.y=Math.max(-n,Math.min(n,c.y))}}))}),[]);var t=document.getElementById("clusters").offsetWidth,a=t;return u.a.createElement(v.a,{ref:e,width:t,height:a,graphData:j,nodeLabel:"id",nodeColor:function(e){return"source"===e.group?"#dc3545":"gray"},linkDirectionalParticleColor:function(){return"red"},linkDirectionalParticles:1,linkDirectionalParticleWidth:function(e){return"P"===e.source.id[0]?2:0},enableZoomPanInteraction:!1})};return Object(m.useEffect)((function(){h.a.render(u.a.createElement(N,null),document.getElementById("clusters"))}),[j]),u.a.createElement("div",{id:"clusters"})}),(function(){return!0})),g=a(12),E=a.n(g);var b=u.a.memo((function(e){var t=e.timeseries,a=e.arrayKey,n=Object(m.useState)([]),c=Object(s.a)(n,2),r=c[0],i=c[1],l=Object(m.useRef)();return Object(m.useEffect)((function(){i(t)}),[t]),Object(m.useEffect)((function(){if(r.length){var e=d.I(l.current),t=50,n=0,c=+e.attr("width")-0,i=+e.attr("height")-50,s=d.K("%e %b"),o=d.C().domain(r.map((function(e){return s(e.date)}))).range([n,c]).paddingInner(.33),m=d.D().domain([Math.min(0,d.x(r,(function(e){return e[a]}))),Math.max(1,d.w(r,(function(e){return e[a]})))]).range([i,t]),u=d.a(o).tickSize(0),f=e.transition().duration(500);e.selectAll(".delta").remove(),e.select(".x-axis").transition(f).style("transform","translateY(".concat(m(0),"px)")).call(u).on("start",(function(){return e.select(".domain").remove()})).selectAll("text").attr("y",0).attr("dy",(function(e,t){return r[t][a]<0?"-1.5em":"1.5em"})).style("text-anchor","middle").attr("fill",(function(e,t){switch(a){case"dailyconfirmed":return"#dc3545";case"dailyrecovered":return"#28a745";case"dailyactive":return"#0479fb";default:return"#6c757d"}})),e.selectAll(".bar").data(r).join("path").attr("class","bar").transition(f).attr("d",(function(e){return function(e,t,a,n,c){return c=Math.sign(n)*Math.min(Math.abs(n),c),["M ".concat(e," ").concat(t),"v ".concat(-n+c),"q 0 ".concat(-c," ").concat(Math.abs(c)," ").concat(-c),"h ".concat(a-2*Math.abs(c)),"q ".concat(Math.abs(c)," 0 ").concat(Math.abs(c)," ").concat(c),"v ".concat(n-c),"Z"].join(" ")}(o(s(e.date)),m(0),o.bandwidth(),m(0)-m(e[a]),5)})).attr("fill",(function(e,t){return"dailyconfirmed"===a?t<r.length-1?"#dc354590":"#dc3545":"dailyrecovered"===a?t<r.length-1?"#28a74590":"#28a745":"dailyactive"===a?t<r.length-1?"#007bff90":"#007bff":t<r.length-1?"#6c757d90":"#6c757d"})).on("end",(function(){return e.selectAll(".delta").data("dailyconfirmed"===a?r:[]).join("text").attr("class","delta").attr("text-anchor","middle").attr("font-size","11px").attr("x",(function(e){return o(s(e.date))+o.bandwidth()/2})).attr("y",(function(e){return m(e[a])-6})).text((function(e){return e[a]})).append("tspan").attr("class","percent").attr("x",(function(e){return o(s(e.date))+o.bandwidth()/2})).attr("dy","-1.2em").text((function(e,t){return t&&r[t-1][a]?d.l("+.1%")((r[t][a]-r[t-1][a])/r[t-1][a]):""}))}))}}),[r,a]),u.a.createElement("div",{className:"DeltaBarGraph fadeInUp",style:{animationDelay:"0.8s"}},u.a.createElement("svg",{ref:l,width:"250",height:"250",viewBox:"0 0 250 250",preserveAspectRatio:"xMidYMid meet"},u.a.createElement("g",{className:"x-axis"}),u.a.createElement("g",{className:"y-axis"})))}),(function(e,t){return!!E()(e.arrayKey,t.arrayKey)&&!!E()(e.timeseries,t.timeseries)}));var y=a(105),j=a(162),O=a(168),N=a(163),M=a(289);var x=function(e){var t=e.title,a=e.statistic,n=e.total,c=e.formula,r=e.date,i=e.description,s=e.className;return u.a.createElement("div",{className:"meta-item ".concat(s)},u.a.createElement("div",{className:"meta-item-top"},u.a.createElement("h3",null,t),u.a.createElement("span",{"data-tip":c,"data-event":"touchstart mouseover","data-event-off":"mouseleave","data-for":"stateMeta",onClick:function(e){return e.stopPropagation()}},u.a.createElement(M.a,null))),u.a.createElement("h1",null,a),u.a.createElement("h5",null,r),n&&u.a.createElement("h5",null,"India has ".concat(n," CPM")),u.a.createElement("p",null,i))},w=a(7),k=a(326),D=a(60),C=a(652),S=a(49);var F=function(e){var t=e.stateData,a=e.lastTestObject,n=e.population,c=e.lastSevenDaysData,r=e.totalData,i=t.confirmed,s=t.active,l=t.deaths,o=i-s-l,d=c[0].totalconfirmed,m=Object(k.a)(c[0].date,"dd MMM"),f=c[6].totalconfirmed,h=Object(k.a)(c[6].date,"dd MMM"),v=i/n*1e6,p=o/i*100,g=s/i*100,E=l/i*100,b=(null===a||void 0===a?void 0:a.totaltested)/n*1e6,y=(f-d)/d*100,j=r[0].confirmed/13329e5*1e6,O=isNaN(Object(D.a)(null===a||void 0===a?void 0:a.updatedon,"dd/MM/yyyy",new Date))?"":"As of ".concat(Object(k.a)(Object(D.a)(null===a||void 0===a?void 0:a.updatedon,"dd/MM/yyyy",new Date),"dd MMM"));return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"StateMeta population"},u.a.createElement(S.a,{place:"top",type:"dark",effect:"solid",multiline:!0,scrollHide:!0,globalEventOff:"click",id:"stateMeta"}),u.a.createElement("div",{className:"meta-item population fadeInUp"},u.a.createElement("h3",null,"Population"),u.a.createElement("h1",null,Object(w.f)(n))),u.a.createElement("div",{className:"alert"},u.a.createElement(C.a,null),u.a.createElement("div",{className:"alert-right"},"Based on 2019 population projection by NCP"," ",u.a.createElement("a",{href:"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf",target:"_noblank"},"report")))),u.a.createElement("div",{className:"StateMeta"},u.a.createElement(x,{className:"confirmed",title:"Confirmed Per Million",statistic:v.toFixed(2),total:j.toFixed(2),formula:"(confirmed / state population) * 1 Million",description:"\n            ".concat(Math.round(v)," out of every 1 million people in ").concat(t.state," have tested positive for the virus.\n            ")}),u.a.createElement(x,{className:"active",title:"Active",statistic:"".concat(g.toFixed(2),"%"),formula:"(active / confirmed) * 100",description:"For every 100 confirmed cases, ".concat(g.toFixed(0)," are currently infected.")}),u.a.createElement(x,{className:"recovery",title:"Recovery Rate",statistic:"".concat(p.toFixed(2),"%"),formula:"(recovered / confirmed) * 100",description:"For every 100 confirmed cases, \n            ".concat(Math.round(p.toFixed(0))," have recovered from the virus.")}),u.a.createElement(x,{className:"mortality",title:"Mortality Rate",statistic:"".concat(E.toFixed(2),"%"),formula:"(deceased / confirmed) * 100",description:"For every 100 confirmed cases, \n            ".concat(Math.round(E.toFixed(0))," have unfortunately passed away from the virus.")}),u.a.createElement(x,{className:"gr",title:"Avg. Growth Rate",statistic:y>0?"".concat(Math.round(y/7),"%"):"-",formula:"(((previousDayData - sevenDayBeforeData) / sevenDayBeforeData) * 100)/7",date:"".concat(m," - ").concat(h),description:"In the last one week, the number of new infections has grown by an average of ".concat(Math.round(y/7),"% every day.")}),u.a.createElement(x,{className:"tpm",title:"Tests Per Million",statistic:"\u2248 ".concat(Math.round(b)),formula:"(total tests in state / total population of state) * 1 Million",date:O,description:"For every 1 million people in ".concat(t.state,",\n            ").concat(Math.round(b)," people were tested.")})))},_=a(169),I=a(2),P=a(559),U=a.n(P),A=a(578),R=a.n(A),T=a(86),B=a(310),X=a(308),z=a(653),K=a(62),H=a(10),L=a(37),W=a(651),q=a(99);var G=u.a.memo((function(e){var t=e.stateName,a=e.stateCode,n=e.fetched,c=e.allStateData;return u.a.createElement("div",{className:"breadcrumb"},u.a.createElement(R.a,null,u.a.createElement(R.a.Item,{href:"/"},"Home"),u.a.createElement(U.a,{direction:"w"},u.a.createElement("summary",null,u.a.createElement(R.a.Item,{href:"".concat(a),selected:!0},t),u.a.createElement(U.a.Caret,{className:"caret"})),n&&u.a.createElement(U.a.Menu,{direction:"se"},c.map((function(e){return u.a.createElement(U.a.Item,{key:e.statecode,className:"item"},u.a.createElement(H.b,{to:"".concat(e.statecode)},I.g[e.statecode]))}))))))}));t.default=u.a.memo((function(e){var t=Object(L.i)().stateCode.toUpperCase(),a=I.g[t],n=Object(m.useState)({}),l=Object(s.a)(n,2),d=l[0],f=l[1],h=Object(m.useState)(!1),v=Object(s.a)(h,2),g=v[0],E=v[1],M=Object(m.useState)(null),x=Object(s.a)(M,2),S=x[0],P=x[1],U=Object(m.useState)({}),A=Object(s.a)(U,2),R=A[0],H=A[1],J=Object(m.useState)(null),V=Object(s.a)(J,2),Y=V[0],Z=V[1],Q=Object(m.useState)({}),$=Object(s.a)(Q,2),ee=$[0],te=$[1],ae=Object(m.useState)({}),ne=Object(s.a)(ae,2),ce=ne[0],re=ne[1],ie=Object(m.useState)({}),se=Object(s.a)(ie,2),le=se[0],oe=se[1],de=Object(m.useState)("confirmed"),me=Object(s.a)(de,2),ue=me[0],fe=me[1],he=Object(W.a)(),ve=Object(s.a)(he,2),pe=ve[0],ge=ve[1].width,Ee=Object(m.useState)(!1),be=Object(s.a)(Ee,2),ye=be[0],je=be[1],Oe=Object(m.useState)({state:a}),Ne=Object(s.a)(Oe,2),Me=Ne[0],xe=Ne[1];Object(q.a)((function(){De(t)}));var we,ke,De=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,i,l,d,m,u,h,v,p,g,b,y,j,O,N;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([o.a.get("https://api.covid19india.org/data.json"),o.a.get("https://api.covid19india.org/state_district_wise.json"),o.a.get("https://api.covid19india.org/states_daily.json"),o.a.get("https://api.covid19india.org/state_test_data.json"),o.a.get("https://api.covid19india.org/sources_list.json"),o.a.get("https://api.covid19india.org/zones.json")]);case 3:n=e.sent,i=Object(s.a)(n,6),l=i[0].data,d=i[1].data,m=i[2].data,u=i[3].data,h=i[4].data,v=i[5].data,p=I.g[t],g=l.statewise,f(g.filter((function(e){return e.statecode!==t}))),Z([g.find((function(e){return e.statecode===t}))]),b=Object(w.k)(m)[t],y=Object(w.j)(u.states_tested_data)[t],j=Object(w.h)(Object(r.a)({},t,b),Object(r.a)({},t,y)),H(j[t]),oe(Object(r.a)({},p,d[p])),O=h.sources_list,re(O.filter((function(e){return e.statecode===t}))),N=u.states_tested_data,te(N.filter((function(e){return e.state===p&&""!==e.totaltested}))),P(Object(w.i)(v.zones,a)),E(!0),Object(T.a)({targets:".highlight",duration:200,delay:3e3,translateX:"confirmed"===ue?"".concat(0*ge,"px"):"active"===ue?"".concat(.25*ge,"px"):"recovered"===ue?"".concat(.5*ge,"px"):"deceased"===ue?"".concat(.75*ge,"px"):"0px",easing:"spring(1, 80, 90, 10)",opacity:1}),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),console.log(e.t0);case 32:case"end":return e.stop()}}),e,null,[[0,29]])})));return function(t){return e.apply(this,arguments)}}(),Ce=ee[ee.length-1],Se=I.j[a],Fe=function(){var e=window.innerWidth>=540?3:2,t=le[a]&&Object.keys(le[a].districtData).length||0;return Math.ceil(t/e)}();return a?u.a.createElement(u.a.Fragment,null,u.a.createElement(K.a,null,u.a.createElement("title",null,"Coronavirus Outbreak in ",I.g[t]," - covid19india.org"),u.a.createElement("meta",{name:"title",content:"Coronavirus Outbreak in ".concat(I.g[t],": Latest Map and Case Count")})),u.a.createElement("div",{className:"State"},u.a.createElement("div",{className:"state-left"},u.a.createElement(G,{stateName:a,stateCode:t,fetched:g,allStateData:d}),u.a.createElement("div",{className:"header"},u.a.createElement("div",{className:"header-left fadeInUp",style:{animationDelay:"0.3s"}},u.a.createElement("h1",null,a),u.a.createElement("h5",null,"Last Updated on"," ",Y&&Object.keys(Y[0]).length?Object(w.e)(Y[0].lastupdatedtime):"")),u.a.createElement("div",{className:"header-right fadeInUp",style:{animationDelay:"0.5s"}},u.a.createElement("h5",null,"Tested"),u.a.createElement("h2",null,Object(w.f)(null===Ce||void 0===Ce?void 0:Ce.totaltested)),u.a.createElement("h5",{className:"timestamp"},isNaN(Object(D.a)(null===Ce||void 0===Ce?void 0:Ce.updatedon,"dd/MM/yyyy",new Date))?"":"As of ".concat(Object(k.a)(Object(D.a)(null===Ce||void 0===Ce?void 0:Ce.updatedon,"dd/MM/yyyy",new Date),"dd MMM"))),u.a.createElement("h5",null,"per ",(null===Ce||void 0===Ce?void 0:Ce.totaltested)&&u.a.createElement("a",{href:Ce.source,target:"_noblank"},"source")))),g&&u.a.createElement("div",{className:"map-switcher",ref:pe},u.a.createElement("div",{className:"highlight ".concat(ue),style:{transform:"translateX(".concat(0*ge,"px)"),opacity:0}}),u.a.createElement("div",{className:"clickable",onClick:function(){fe("confirmed"),Object(T.a)({targets:".highlight",translateX:"".concat(0*ge,"px"),easing:"spring(1, 80, 90, 10)"})}}),u.a.createElement("div",{className:"clickable",onClick:function(){fe("active"),Object(T.a)({targets:".highlight",translateX:"".concat(.25*ge,"px"),easing:"spring(1, 80, 90, 10)"})}}),u.a.createElement("div",{className:"clickable",onClick:function(){fe("recovered"),Object(T.a)({targets:".highlight",translateX:"".concat(.5*ge,"px"),easing:"spring(1, 80, 90, 10)"})}}),u.a.createElement("div",{className:"clickable",onClick:function(){fe("deceased"),Object(T.a)({targets:".highlight",translateX:"".concat(.75*ge,"px"),easing:"spring(1, 80, 90, 10)"})}})),g&&u.a.createElement(j.a,{data:Y[0]}),g&&u.a.createElement(N.a,{timeseries:R}),g&&u.a.createElement(O.a,{mapName:a,states:Y,districts:le,zones:S,stateTestData:ee,regionHighlighted:Me,setRegionHighlighted:xe,mapOption:ue,isCountryLoaded:!1}),g&&u.a.createElement("div",{className:"meta-secondary"},u.a.createElement("div",{className:"alert"},u.a.createElement(B.a,null),u.a.createElement("div",{className:"alert-right"},"Awaiting district details for"," ",(null===(we=le[a])||void 0===we||null===(ke=we.districtData.Unknown)||void 0===ke?void 0:ke.confirmed)||"0"," ","cases")),u.a.createElement("div",{className:"alert"},u.a.createElement(C.a,null),u.a.createElement("div",{className:"alert-right"},"Data collected from sources"," ",ce.length>0?Object.keys(ce[0]).map((function(e,t){if(e.match("source")&&""!==ce[0][e]){var a=e.match(/\d+/);return u.a.createElement(u.a.Fragment,{key:t},a>1?",":"",u.a.createElement("a",{href:ce[0][e]},a))}return null})):""))),g&&u.a.createElement(F,{stateData:Y[0],lastTestObject:Ce,population:Se,lastSevenDaysData:R.slice(-7),totalData:d.filter((function(e){return"TT"===e.statecode}))})),u.a.createElement("div",{className:"state-right"},g&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"district-bar",style:ye?{}:{display:"flex"}},u.a.createElement("div",{className:"district-bar-left fadeInUp",style:{animationDelay:"0.6s"}},u.a.createElement("h2",{className:ue},"Top districts"),u.a.createElement("div",{className:"districts ".concat(ye?"is-grid":""),style:ye?{gridTemplateRows:"repeat(".concat(Fe,", 2rem)")}:{}},le[a]?Object.keys(le[a].districtData).filter((function(e){return"Unknown"!==e})).sort((function(e,t){var n=le[a].districtData[t],c=le[a].districtData[e];return n[ue]-c[ue]})).slice(0,ye?void 0:5).map((function(e,t){var n=le[a].districtData[e];return u.a.createElement("div",{key:t,className:"district"},u.a.createElement("h2",null,n[ue]),u.a.createElement("h5",null,e),"active"!==ue&&u.a.createElement("div",{className:"delta"},u.a.createElement(X.a,{className:ue}),u.a.createElement("h6",{className:ue},n.delta[ue])))})):""),le[a]&&Object.keys(le[a].districtData).length>5&&u.a.createElement("button",{className:"button",onClick:function(){je(!ye)}},ye?"View less":"View all")),u.a.createElement("div",{className:"district-bar-right"},("confirmed"===ue||"deceased"===ue)&&u.a.createElement("div",{className:"happy-sign fadeInUp",style:{animationDelay:"0.6s"}},R.slice(-5).every((function(e){return 0===e["daily".concat(ue)]}))&&u.a.createElement("div",{className:"alert ".concat("confirmed"===ue?"is-green":"")},u.a.createElement(z.a,null),u.a.createElement("div",{className:"alert-right"},"No new ",ue," cases in the past five days"))),u.a.createElement(b,{timeseries:R.slice(-5),arrayKey:"daily".concat(ue)}))),!1,u.a.createElement(_.a,{timeseries:R}))),u.a.createElement("div",{className:"state-left"},u.a.createElement("div",{className:"Clusters fadeInUp",style:{animationDelay:"0.8s"}},u.a.createElement("h1",null,"Network of Transmission"),u.a.createElement(p,{stateCode:t}))),u.a.createElement("div",{className:"state-right"})),u.a.createElement(y.a,null)):u.a.createElement(L.a,{to:"/"})}))}}]);
//# sourceMappingURL=11.e5efa5db.chunk.js.map